import{Q as c}from"./QTd.6a465a6b.js";import{u as m,ar as d,as as n,o as u,c as w,d as r,w as s,e as p,a5 as _,a as h,G as f}from"./index.504ec86a.js";import{Q as y}from"./QInput.83dad3fc.js";import{Q as g}from"./QTable.b7213eba.js";import{u as b}from"./pageHeader.b29c2f83.js";import{_ as S}from"./ViewApprovalButton.b9c26d44.js";import"./ClosePopup.337d1baa.js";import"./position-engine.224580a6.js";import{u as q}from"./viewApproval.4c4ccb4a.js";import"./QCardSection.4fa991c8.js";import"./QSelect.b29667b8.js";import"./QForm.590c6937.js";import"./QCard.f321d939.js";import"./use-key-composition.c8c0c6cd.js";import"./focus-manager.bec94b0c.js";import"./QList.6e762c59.js";import"./QDate.4981f917.js";import"./QPopupProxy.7af26239.js";import"./date.40c9c2e6.js";import"./globalNotification.5d4f7813.js";const v=m();d("addApproval",{state:()=>({recipient:null,recipientOptions:null,issuer:null,issuerOptions:null,type:null,typeOptions:null,subject:null,description:null,current_user_id:v.getEmployeeId,insertRequestConfirmationID:null}),getters:{},actions:{async fetchEmployeeOptions(){try{const{data:e,error:t}=await n.from("employee").select("id, company_employee_id, first_name, middle_name, last_name");if(t)throw t;this.recipientOptions=e,this.issuerOptions=e}catch(e){console.log(e)}},async fetchRequestTypeOptions(){try{const{data:e,error:t}=await n.from("request_type").select("id, request_type_name");if(t)throw t;this.typeOptions=e}catch(e){console.log(e)}},async insertRequestForm(){try{const{data:e,error:t}=await n.from("request").insert([{request_employee_id:this.recipient.id,request_type_id:this.type.id,request_date:new Date().toLocaleDateString("en-US"),request_subject:this.subject,request_description:this.description,request_application_date:new Date().toLocaleDateString("en-US"),admin_employee_id:this.issuer.id,admin_approval_status:"Pending",admin_comments:"Pending",admin_confirmation_date:new Date().toLocaleDateString("en-US"),change_date:new Date().toLocaleDateString("en-US"),is_archive:!1}]);if(t)throw t}catch(e){console.log(e)}}}});const A=h("div",{class:"tw-w-11/12 tw-mx-auto tw-flex tw-justify-end tw-mb-5 tw-gap-4"},null,-1),$={__name:"AdminApprovalListPage",setup(e){const t=b();t.currentPage="Approval List";const a=q();return a.getRequestList(),(i,l)=>(u(),w(_,null,[A,r(g,{class:"my-sticky-header-table tw-w-11/12 tw-mx-auto tw-mt-6 tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse",flat:"",bordered:"",filter:i.tableSearch,columns:p(a).columns,rows:p(a).getUnarchivedApprovalList,"rows-per-page-options":[10,20,0],"row-key":"name"},{"body-cell-actions":s(o=>[r(c,{key:"actions",class:"tw-w-2/12",props:o},{default:s(()=>[r(S,{rows:o.row},null,8,["rows"])]),_:2},1032,["props"])]),"top-right":s(()=>[r(y,{borderless:"",dense:"",debounce:"300",modelValue:i.tableSearch,"onUpdate:modelValue":l[0]||(l[0]=o=>i.tableSearch=o),placeholder:"Search"},{append:s(()=>[r(f,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["filter","columns","rows"])],64))}};export{$ as default};
