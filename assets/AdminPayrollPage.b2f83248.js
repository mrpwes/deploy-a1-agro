import{u as K}from"./pageHeader.76fa7086.js";import{k as j,r as k,j as N,p as U,t as q,q as $,i as z,aO as G,Q as I,at as E,au as H,o as A,c as Q,d,w as f,a as s,a8 as h,e as D,S as Y,aa as J,az as X,a7 as Z,G as ee,f as v,aP as P}from"./index.c0f9d41d.js";import{Q as C}from"./QInput.5bafdbfb.js";import{g as te,Q as ae}from"./position-engine.24d5c4ea.js";import{e as oe,c as le,Q as ne}from"./QSelect.06471d4e.js";import{Q as y}from"./QTd.2ad6e5e1.js";import{Q as re}from"./QTr.49fd6e8b.js";import{Q as se}from"./QTable.773d47ad.js";import{Q as ie,C as ue}from"./ClosePopup.7d22d6d7.js";import{Q as de}from"./QDialog.7c9c19ff.js";import"./use-key-composition.d0293a0f.js";import"./focus-manager.90a99338.js";import"./QList.0b4dd11e.js";function F(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const l=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const r=e.valueOf();if(Object(r)!==r){const o=new e.constructor(r);return t.set(e,o),o}}return t.set(e,l),e instanceof Set?e.forEach(r=>{l.add(F(r,t))}):e instanceof Map&&e.forEach((r,o)=>{l.set(o,F(r,t))}),Object.assign(l,...Object.keys(e).map(r=>({[r]:F(e[r],t)})))}var M=j({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:l}){const{proxy:r}=q(),{$q:o}=r,i=k(null),_=k(""),c=k("");let p=!1;const S=N(()=>$({initialValue:_.value,validate:e.validate,set:b,cancel:m,updatePosition:a},"value",()=>c.value,w=>{c.value=w}));function b(){e.validate(c.value)!==!1&&(n()===!0&&(l("save",c.value,_.value),l("update:modelValue",c.value)),u())}function m(){n()===!0&&l("cancel",c.value,_.value),u()}function a(){z(()=>{i.value.updatePosition()})}function n(){return G(c.value,_.value)===!1}function u(){p=!0,i.value.hide()}function g(){p=!1,_.value=F(e.modelValue),c.value=F(e.modelValue),l("beforeShow")}function V(){l("show")}function x(){p===!1&&n()===!0&&(e.autoSave===!0&&e.validate(c.value)===!0?(l("save",c.value,_.value),l("update:modelValue",c.value)):l("cancel",c.value,_.value)),l("beforeHide")}function L(){l("hide")}function T(){const w=t.default!==void 0?[].concat(t.default(S.value)):[];return e.title&&w.unshift(U("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&w.push(U("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[U(I,{flat:!0,color:e.color,label:e.labelCancel||o.lang.label.cancel,onClick:m}),U(I,{flat:!0,color:e.color,label:e.labelSet||o.lang.label.set,onClick:b})])),w}return Object.assign(r,{set:b,cancel:m,show(w){i.value!==null&&i.value.show(w)},hide(w){i.value!==null&&i.value.hide(w)},updatePosition:a}),()=>{if(e.disable!==!0)return U(oe,{ref:i,class:"q-popup-edit",cover:e.cover,onBeforeShow:g,onShow:V,onBeforeHide:x,onHide:L,onEscapeKey:m},T)}}});const ce=E("payrollTable",{state:()=>({payrollColumns:{columns:[{name:"employeeId",required:!0,label:"Emp. Id",align:"left",sortable:!0},{name:"employeeName",align:"center",label:"Name",sortable:!0,classes:"!tw-bg-neutral-300"},{name:"noDaysWorked",align:"center",label:"Days Worked",sortable:!0},{name:"ratePerDay",align:"center",label:"Rate/Day",classes:"!tw-bg-neutral-300"},{name:"total",align:"center",label:"Total",sortable:!0},{name:"sss",align:"center",label:"SSS",sortable:!0,classes:"!tw-bg-neutral-300"},{name:"philHealth",align:"center",label:"PhilHealth",sortable:!0},{name:"pagIbig",align:"center",label:"PagIBIG",sortable:!0,classes:"!tw-bg-neutral-300"},{name:"sssCalamityLoan",align:"center",label:"SSS Calamity Loan",sortable:!0},{name:"sssLoan",align:"center",label:"SSS Salary Loan",sortable:!0,classes:"!tw-bg-neutral-300"},{name:"pagIbigLoan",align:"center",label:"Pag-IBIG Loan",sortable:!0,headerStyle:"width: 0px"},{name:"NetPay",align:"center",label:"NetPay",sortable:!0,classes:"!tw-bg-neutral-300"},{name:"actions",align:"center",label:""}]},rows:[],selectedDate:null,selectedDateOptions:null}),getters:{getArchived(e){return e.rows.filter(t=>t.is_archive===!0)},getUnarchived(e){return e.rows.filter(t=>t.is_archive===!1)}},actions:{customFilter(e,t){return console.log("customFilter",e,t),e.filter(l=>{const r=t.toLowerCase();return l.last_name.toLowerCase().includes(r)||l.first_name.toLowerCase().includes(r)||l.middle_name.toLowerCase().includes(r)})},formatDate(e){const t=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${l}-${r}`},getAndCheckDateRangesForCurrentMonth(){const e=new Date,t=e.getFullYear(),l=e.getMonth(),r=new Date(t,l,1),o=new Date(t,l,15),i=new Date(t,l,16),_=new Date(t,l+1,0),c={firstHalf:{start:this.formatDate(r),end:this.formatDate(o)},secondHalf:{start:this.formatDate(i),end:this.formatDate(_)}},p=this.formatDate(e),S=new Date(c.firstHalf.start),b=new Date(c.firstHalf.end),m=new Date(c.secondHalf.start),a=new Date(c.secondHalf.end);let n,u;return e>=S&&e<=b?(n=this.formatDate(S),u=this.formatDate(b)):e>=m&&e<=a?(n=this.formatDate(m),u=this.formatDate(a)):(n="out of range",u="out of range"),{todayDate:p,startDate:n,endDate:u}},async getSalaryHistory(){try{const{data:e,error:t}=await H.from("salary_history").select();t&&console.error(t),this.selectedDateOptions=e.sort((l,r)=>new Date(l.date_start)-new Date(r.date_start))}catch(e){console.error(e)}},customLogic(e,t){return!(e&&t)},async fetchAttendanceInRange(e=this.selectedDate.date_start,t=this.selectedDate.date_end){try{const{data:l,error:r}=await H.from("employee").select(`*,
            attendance(*, attendance_type(*)),
            employee_audit!employee_audit_employee_id_fkey(*),
            emp_sss_contrib_audit!emp_sss_contrib_audit_employee_id_fkey(*),
            emp_philhealth_contrib_audit!emp_philhealth_contrib_audit_employee_id_fkey(*),
            emp_pagibig_contrib_audit!emp_pagibig_contrib_audit_employee_id_fkey(*),
            government_loan_audit!government_loan_audit_employee_id_fkey(*)
            `).gte("attendance.date",e).lte("attendance.date",t).gte("government_loan_audit.date_end",t).lte("government_loan_audit.change_date",t).gte("emp_sss_contrib_audit.change_date",t).gte("emp_philhealth_contrib_audit.change_date",t).gte("emp_pagibig_contrib_audit.change_date",t);console.log(t),console.log(l),l.forEach(o=>{const i=o.emp_sss_contrib_audit;if(i.length>0){const _=i[i.length-1];_.half_month_indicator==!0&&[28,29,30,31].includes(parseInt(t.split("-")[2]))?console.log("is true."):_.half_month_indicator==!1&&[15].includes(parseInt(t.split("-")[2]))?console.log("is true 2."):(console.log("EMPLOYEE SSS is false."),o.emp_sss_contrib_audit=[])}else console.log("emp_sss_contrib_audit array is empty.")}),l.forEach(o=>{const i=o.emp_philhealth_contrib_audit;if(i.length>0){const _=i[i.length-1];_.half_month_indicator==!0&&[28,29,30,31].includes(parseInt(t.split("-")[2]))?console.log("Philhealth is true."):_.half_month_indicator==!1&&[15].includes(parseInt(t.split("-")[2]))?console.log("Philhealth is true 2."):o.emp_philhealth_contrib_audit=[]}else console.log("emp_philhealth_contrib_audit array is empty.")}),l.forEach(o=>{const i=o.emp_pagibig_contrib_audit;if(i.length>0){const _=i[i.length-1];_.half_month_indicator==!0&&[28,29,30,31].includes(parseInt(t.split("-")[2]))?console.log("Pagibig is true."):_.half_month_indicator==!1&&[15].includes(parseInt(t.split("-")[2]))?console.log("Pagibig is true 2."):o.emp_pagibig_contrib_audit=[]}else console.log("emp_pagibig_contrib_audit array is empty.")}),l.forEach(o=>{const i=o.government_loan_audit;if(i.length>0){const _={};i.forEach(c=>{const p=c.government_loan_id;(!_[p]||c.audit_id>_[p].audit_id)&&(_[p]=c)}),o.government_loan_audit=Object.values(_)}else console.log("government_loan_audit array is empty.")}),r&&console.error(r),this.rows=l}catch(l){console.error(l)}},getNearestDateRange(){if(this.selectedDate!=null)return;const e=new Date;function t(i){return new Date(i)}function l(i){return Math.abs(e-i)}let r=null,o=1/0;for(const i of this.selectedDateOptions){const _=t(i.date_start),c=t(i.date_end),p=l(_),S=l(c),b=Math.min(p,S);b<o&&(o=b,r=i)}this.selectedDate=r},async fetchAttendanceReports(){this.rows=[],await this.getSalaryHistory(),await this.getNearestDateRange(),await this.fetchAttendanceInRange()}}}),W=E("payrollTableFormatter",{state:()=>({payrollData:[],sssContributionTableRanges:[],philhealthContributionRate:null,pagibigContributionRate:null}),getters:{formattedPayrollData:e=>e.payrollData.map(t=>({...t,formattedDate:new Date(t.date).toLocaleDateString()}))},actions:{twoDecimalWithoutRounding(e){var t=e.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0];return parseFloat(t)},capitalizeFirstLetterOfEachWord(e){return e.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")},noDaysWorkedFormatter(e){let t=0;return e.forEach(r=>{if(r.time_out===null&&r.time_in!==null)t+=0;else if(r.attendance_type_id!==1&&r.attendance_type_id!==void 0)t+=480;else if(r.time_in&&r.time_out){const o=new Date(r.time_in),i=new Date(r.time_out),_=new Date(o);_.setHours(8,0,0,0),o<_&&o.setHours(8,0,0,0);const c=new Date(i);c.setHours(17,0,0,0),i>c&&i.setHours(17,0,0,0);let p=(i-o)/(1e3*60);const S=new Date(i);S.setHours(13,0,0,0),i>S&&(p-=60),t+=p}}),(t/60).toFixed(2)/8},noDaysWorkedFormattersss(e){let t=0;return e.forEach(l=>{if(l.time_out===null&&l.time_in!==null)t+=0;else if(l.attendance_type_id!==1&&l.attendance_type_id!==void 0)t+=8;else if(l.time_in&&l.time_out){const r=new Date(l.time_in),o=new Date(l.time_out),i=new Date(r);i.setHours(8,0,0,0),r<i&&r.setHours(8,0,0,0);const _=new Date(o);_.setHours(17,0,0,0),o>_&&o.setHours(17,0,0,0);let c=(o-r)/(1e3*60*60);const p=new Date(o);p.setHours(13,0,0,0),o>p&&(c-=1),t+=c}}),this.twoDecimalWithoutRounding(t/8)},grossIncomeFormatter(e,t){const l=this.noDaysWorkedFormatter(t);return e*l},monthlyIncomeFormatter(e,t=30){return this.twoDecimalWithoutRounding(e*t)},async fetchSssContributionTable(){try{const{data:e,error:t}=await H.from("sss_contribution_table_audit").select("*").order("audit_id",{ascending:!1}).limit(1);if(t)throw console.error(t),t;this.sssContributionTableRanges=e[0].data.map(l=>{const r=l.combinedValue;let o,i,_;if(_=parseFloat(l.values[4].replace(",","")),r.startsWith("Below"))o=0,i=parseFloat(r.split(" ")[1].replace(",",""));else if(r.includes("Over"))o=parseFloat(r.split(" ")[0].replace(",","")),i=null;else{const[c,p]=r.split(" - ");o=parseFloat(c.replace(",","")),i=parseFloat(p.replace(",",""))}return{min:o,max:i,sss_bracket:_}})}catch(e){console.error(e)}},findSSSRange(e){for(const t of this.sssContributionTableRanges)if(e>=t.min&&e<t.max)return t.sss_bracket;return"Value is out of range"},async fetchPhilhealthContributionTable(){try{const{data:e,error:t}=await H.from("philhealth_contribution_table_audit").select("*").order("audit_id",{ascending:!1}).limit(1);if(t)throw console.error(t),t;this.philhealthContributionRate=e[0].data.value}catch(e){console.error(e)}},async fetchPagibigContributionTable(){try{const{data:e,error:t}=await H.from("pagibig_contribution_table_audit").select("*").order("audit_id",{ascending:!1}).limit(1);if(t)throw console.error(t),t;console.log(e),this.pagibigContributionRate=e}catch(e){console.error(e)}},calculatePagibigContribution(e){const t=this.monthlyIncomeFormatter(e);let l,r;return t<=1500?(l=.01,r=Math.min(t,1e4)*l):(l=.02,r=Math.min(t,1e4)*l),this.twoDecimalWithoutRounding(r)}}});const me={class:"!tw-h-min !tw-w-8/12 !tw-max-w-full tw-bg-white tw-p-6"},_e={id:"section-to-print"},fe={class:"tw-text-3xl tw-font-extrabold tw-pb-3"},be=s("thead",null,[s("tr",null,[s("th",{class:"tw-text-center tw-font-bold tw-border",colspan:"3"}," Gross "),s("th",{class:"tw-text-center tw-font-bold tw-border",colspan:"2"}," Deductions ")])],-1),he=s("td",{class:"tw-border"},"Rate Per Day:",-1),pe={class:"tw-border"},ge=s("td",{class:"tw-border"},null,-1),we=s("td",{class:"tw-border"},"SSS Contribution:",-1),ye={class:"tw-border tw-flex tw-justify-between"},ve={class:"tw-text-gray-500"},De=s("td",{class:"tw-border"},"Day Worked:",-1),Ve={class:"tw-border"},Se={class:"tw-border"},Ce=s("td",{class:"tw-border"},"PhilHealth Contribution:",-1),Pe={class:"tw-border tw-flex tw-justify-between"},Me={class:"tw-text-gray-500"},ke=s("td",{colspan:"3",class:"tw-border"},null,-1),Ie=s("td",{class:"tw-border"},"Pag-IBIG Contribution:",-1),xe={class:"tw-border tw-flex tw-justify-between"},Ue={class:"tw-text-gray-500"},He=s("tr",null,[s("td",{colspan:"3",class:"tw-border"},"\xA0"),s("td",{class:"tw-border"}),s("td",{class:"tw-border"})],-1),Fe=s("td",{colspan:"3",class:"tw-border"},null,-1),Te=s("td",{class:"tw-border"},"SSS Calamity Loan:",-1),Le={class:"tw-border tw-text-end"},Re=s("td",{colspan:"3",class:"tw-border"},null,-1),Ae=s("td",{class:"tw-border"},"SSS Salary Loan:",-1),Oe={class:"tw-border tw-text-end"},Ee=s("td",{colspan:"3",class:"tw-border"},null,-1),Qe=s("td",{class:"tw-border"},"Pag-IBIG Loan:",-1),We={class:"tw-border tw-text-end"},Be=s("tr",null,[s("td",{colspan:"3",class:"tw-border"},"\xA0"),s("td",{class:"tw-border"}),s("td",{class:"tw-border"})],-1),Ke=s("td",{colspan:"2",class:"tw-border"},"Total Gross Income:",-1),je={class:"tw-border"},Ne=s("td",{class:"tw-border"},"Total Deductions:",-1),qe={class:"tw-border tw-justify-end tw-text-end"},$e=s("td",{class:"tw-border",colspan:"3"},null,-1),ze=s("td",{class:"tw-border"},"Total Net Pay:",-1),Ge={class:"tw-border tw-text-end"},O={__name:"ViewPayrollRowButton",props:["rows"],setup(e){const t=W(),l=k(0),r=k(!1),o=k(null);function i(m){o.value=m,r.value=!0}function _(){l.value+=1,X.create({icon:"done",color:"positive",message:"SMS Sent!"})}function c(m,a){return m.filter(g=>g.government_loan_type_id===a).reduce((g,V)=>g+V.amortization,0)}function p(){var m,a,n,u,g,V;return((a=(m=o.value.emp_sss_contrib_audit[o.value.emp_sss_contrib_audit.length-1])==null?void 0:m.amount)!=null?a:0)+((u=(n=o.value.emp_philhealth_contrib_audit[o.value.emp_philhealth_contrib_audit.length-1])==null?void 0:n.amount)!=null?u:0)+((V=(g=o.value.emp_pagibig_contrib_audit[o.value.emp_pagibig_contrib_audit.length-1])==null?void 0:g.amount)!=null?V:0)+c(o.value.government_loan_audit,1)+c(o.value.government_loan_audit,2)+c(o.value.government_loan_audit,3)}function S(m){var a=m.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0];return parseFloat(a)}function b(){try{return S(t.grossIncomeFormatter(o.value.rate_per_day,o.value.attendance)-p())}catch(m){return console.error("Error calculating payroll:",m),0}}return(m,a)=>(A(),Q(J,null,[d(I,{unelevated:"",padding:"none",icon:"visibility",onClick:a[0]||(a[0]=n=>i(e.rows))}),d(de,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=n=>r.value=n),persistent:""},{default:f(()=>[s("div",me,[s("div",_e,[s("div",fe,h(o.value.company_employee_id+" - "+o.value.first_name+" "+o.value.last_name),1),d(le,{separator:"cell",flat:"",bordered:"",dense:""},{default:f(()=>{var n,u,g,V,x;return[be,s("tbody",null,[s("tr",null,[he,s("td",pe,h(o.value.rate_per_day),1),ge,we,s("td",ye,[s("div",ve,h(D(t).findSSSRange(o.value.rate_per_day*30)),1),s("div",null,h(o.value.emp_sss_contrib_audit&&o.value.emp_sss_contrib_audit.length>0&&(n=o.value.emp_sss_contrib_audit[o.value.emp_sss_contrib_audit.length-1].amount)!=null?n:0),1)])]),s("tr",null,[De,s("td",Ve,h(D(t).noDaysWorkedFormatter(o.value.attendance)),1),s("td",Se,h(D(t).grossIncomeFormatter(o.value.rate_per_day,o.value.attendance)),1),Ce,s("td",Pe,[s("div",Me,h(D(t).philhealthContributionRate/2/100*(o.value.rate_per_day*30)),1),s("div",null,h((g=(u=o.value.emp_philhealth_contrib_audit[o.value.emp_philhealth_contrib_audit.length-1])==null?void 0:u.amount)!=null?g:0),1)])]),s("tr",null,[ke,Ie,s("td",xe,[s("div",Ue,h(D(t).calculatePagibigContribution(o.value.rate_per_day)),1),s("div",null,h((x=(V=o.value.emp_pagibig_contrib_audit[o.value.emp_pagibig_contrib_audit.length-1])==null?void 0:V.amount)!=null?x:0),1)])]),He,s("tr",null,[Fe,Te,s("td",Le,h(c(o.value.government_loan_audit,2)),1)]),s("tr",null,[Re,Ae,s("td",Oe,h(c(o.value.government_loan_audit,1)),1)]),s("tr",null,[Ee,Qe,s("td",We,h(c(o.value.government_loan_audit,3)),1)]),Be,s("tr",null,[Ke,s("td",je,h(D(t).grossIncomeFormatter(o.value.rate_per_day,o.value.attendance)),1),Ne,s("td",qe,h(p()),1)]),s("tr",null,[$e,ze,s("td",Ge,h(b()),1)])])]}),_:1})]),d(ie,{align:"right",class:"text-primary noPrint"},{default:f(()=>[Y(d(I,{flat:"",label:"Cancel"},null,512),[[ue]]),d(I,{flat:"",class:"tw-bg-green-400",icon:"mdi-message",label:l.value===0?"SEND SMS":"SEND SMS "+l.value,onclick:_},null,8,["label"]),d(I,{flat:"",class:"tw-bg-green-400",icon:"print",label:"print payslip",onclick:"window.print()"})]),_:1})])]),_:1},8,["modelValue"])],64))}},Ye={__name:"PayrollSheetTable",setup(e){const t=ce(),l=W(),r=k(""),o=k(!1);t.fetchAttendanceReports(),l.fetchSssContributionTable(),l.fetchPhilhealthContributionTable(),l.fetchPagibigContributionTable();function i(b,m){return b.filter(u=>u.government_loan_type_id===m).reduce((u,g)=>u+g.amortization,0)}function _(b){var m,a,n,u,g,V;return((a=(m=b.emp_sss_contrib_audit[0])==null?void 0:m.amount)!=null?a:0)+((u=(n=b.emp_philhealth_contrib_audit[0])==null?void 0:n.amount)!=null?u:0)+((V=(g=b.emp_pagibig_contrib_audit[0])==null?void 0:g.amount)!=null?V:0)+i(b.government_loan_audit,1)+i(b.government_loan_audit,2)+i(b.government_loan_audit,3)}function c(b){var m=b.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0];return parseFloat(m)}function p(b){try{return c(l.grossIncomeFormatter(b.rate_per_day,b.attendance)-_(b))}catch(m){return console.error("Error calculating payroll:",m),b}}function S(b){const m=document.getElementById(b);let a="";a+=Array.from(m.querySelectorAll("th")).map(R=>R.innerText.replace(/arrow_upward/g,"")).join(",")+`
`,Array.from(m.querySelectorAll("tr")).slice(1).forEach(R=>{a+=Array.from(R.querySelectorAll("td")).slice(0,-1).map(B=>B.innerText).join(",")+`
`});const g=new Date,V={month:"short",day:"2-digit",year:"numeric"},x=g.toLocaleDateString("en-US",V).replace(",","").replace(/\s+/g,"-"),L=new Blob([a],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(L),w=document.createElement("a");w.setAttribute("href",T),w.setAttribute("download",`Payroll-Sheet-Report-${x}.csv`),document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(T)}return(b,m)=>(A(),Z(se,{id:"exportTable",class:"tw-border tw-rounded-3xl tw-shadow-lg",flat:"",bordered:"",dense:"",title:"Attendance Report","title-class":["tw-text-xl","tw-font-bold"],columns:D(t).payrollColumns.columns,rows:D(t).getUnarchived,"rows-per-page-options":[0],filter:r.value,"filter-method":D(t).customFilter,separator:"cell","row-key":"name"},{"top-right":f(()=>[d(I,{color:"blue","icon-right":"archive",label:"Export to CSV","no-caps":"",onClick:m[0]||(m[0]=a=>S("exportTable")),class:"tw-mr-16"}),d(C,{borderless:"",dense:"",debounce:"300",modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=a=>r.value=a),placeholder:"Search Name"},{append:f(()=>[d(ee,{name:"search"})]),_:1},8,["modelValue"])]),"top-left":f(()=>[d(ne,{rounded:"",standout:"","use-input":"",modelValue:D(t).selectedDate,"onUpdate:modelValue":[m[2]||(m[2]=a=>D(t).selectedDate=a),m[3]||(m[3]=a=>D(t).fetchAttendanceReports())],options:D(t).selectedDateOptions,"option-label":a=>a.date_start+" "+a.date_end,"hide-selected":"","fill-input":"","hide-bottom-space":"","input-debounce":"0",class:"!tw-pb-0"},{"no-option":f(()=>[d(te,null,{default:f(()=>[d(ae,{class:"text-grey"},{default:f(()=>[v(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label"])]),"body-cell-actions":f(a=>[d(y,{key:"actions",class:"tw-w-2/12",props:a},{default:f(()=>[d(O,{rows:a.row},null,8,["rows"])]),_:2},1032,["props"])]),body:f(a=>[d(re,{props:a},{default:f(()=>[d(y,{key:"employeeId",props:a,"auto-width":""},{default:f(()=>[v(h(a.row.company_employee_id),1)]),_:2},1032,["props"]),d(y,{key:"employeeName",props:a,"auto-width":""},{default:f(()=>[v(h(a.row.first_name+" "+a.row.last_name),1)]),_:2},1032,["props"]),d(y,{key:"noDaysWorked",props:a,"auto-width":""},{default:f(()=>[v(h(D(l).noDaysWorkedFormatter(a.row.attendance))+" ",1),d(M,{disable:!o.value,modelValue:a.row.noDaysWorked,"onUpdate:modelValue":n=>a.row.noDaysWorked=n,modelModifiers:{number:!0},buttons:""},{default:f(n=>[d(C,{type:"number",modelValue:n.value,"onUpdate:modelValue":u=>n.value=u,modelModifiers:{number:!0},dense:"",autofocus:"",onKeyup:P(n.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["disable","modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),d(y,{key:"ratePerDay",props:a,"auto-width":""},{default:f(()=>[v(h(a.row.rate_per_day.toFixed(2))+" ",1),d(M,{disable:!o.value,modelValue:a.row.ratePerDay,"onUpdate:modelValue":n=>a.row.ratePerDay=n,modelModifiers:{number:!0},buttons:""},{default:f(n=>[d(C,{type:"number",modelValue:n.value,"onUpdate:modelValue":u=>n.value=u,modelModifiers:{number:!0},dense:"",autofocus:"",onKeyup:P(n.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["disable","modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),d(y,{key:"total",props:a,"auto-width":""},{default:f(()=>[v(h(D(l).grossIncomeFormatter(a.row.rate_per_day,a.row.attendance)),1)]),_:2},1032,["props"]),d(y,{key:"sss",props:a,"auto-width":""},{default:f(()=>{var n;return[v(h(a.row.emp_sss_contrib_audit.length>0&&(n=a.row.emp_sss_contrib_audit[a.row.emp_sss_contrib_audit.length-1].amount)!=null?n:0)+" ",1),d(M,{disable:!o.value,modelValue:a.row.sss,"onUpdate:modelValue":u=>a.row.sss=u,modelModifiers:{number:!0},button:""},{default:f(u=>[d(C,{type:"number",modelValue:u.value,"onUpdate:modelValue":g=>u.value=g,modelModifiers:{number:!0},dense:"",autofocus:"",onKeyup:P(u.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["disable","modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"]),d(y,{key:"philHealth",props:a,"auto-width":""},{default:f(()=>{var n;return[v(h(a.row.emp_philhealth_contrib_audit.length>0&&(n=a.row.emp_philhealth_contrib_audit[a.row.emp_philhealth_contrib_audit.length-1].amount)!=null?n:0)+" ",1),d(M,{disable:!o.value,modelValue:a.row.philHealth,"onUpdate:modelValue":u=>a.row.philHealth=u,modelModifiers:{number:!0},buttons:""},{default:f(u=>[d(C,{type:"number",modelValue:u.value,"onUpdate:modelValue":g=>u.value=g,modelModifiers:{number:!0},dense:"",autofocus:"",onKeyup:P(u.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["disable","modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"]),d(y,{key:"pagIbig",props:a,"auto-width":""},{default:f(()=>{var n;return[v(h(a.row.emp_pagibig_contrib_audit.length>0&&(n=a.row.emp_pagibig_contrib_audit[a.row.emp_pagibig_contrib_audit.length-1].amount)!=null?n:0)+" ",1),d(M,{disable:!o.value,modelValue:a.row.pagIbig,"onUpdate:modelValue":u=>a.row.pagIbig=u,modelModifiers:{number:!0},buttons:""},{default:f(u=>[d(C,{type:"number",modelValue:u.value,"onUpdate:modelValue":g=>u.value=g,modelModifiers:{number:!0},dense:"",autofocus:"",onKeyup:P(u.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["disable","modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"]),d(y,{key:"sssCalamityLoan",props:a,"auto-width":""},{default:f(()=>[v(h(i(a.row.government_loan_audit,2))+" ",1),d(M,{disable:!o.value,modelValue:a.row.sssCalamityLoan,"onUpdate:modelValue":n=>a.row.sssCalamityLoan=n,modelModifiers:{number:!0},buttons:""},{default:f(n=>[d(C,{type:"number",modelValue:n.value,"onUpdate:modelValue":u=>n.value=u,modelModifiers:{number:!0},dense:"",autofocus:"",onKeyup:P(n.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["disable","modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),d(y,{key:"sssLoan",props:a,"auto-width":""},{default:f(()=>[v(h(i(a.row.government_loan_audit,1))+" ",1),d(M,{disable:!o.value,modelValue:a.row.sssLoan,"onUpdate:modelValue":n=>a.row.sssLoan=n,modelModifiers:{number:!0},buttons:""},{default:f(n=>[d(C,{type:"number",modelValue:n.value,"onUpdate:modelValue":u=>n.value=u,modelModifiers:{number:!0},dense:"",autofocus:"",onKeyup:P(n.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["disable","modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),d(y,{key:"pagIbigLoan",props:a,"auto-width":""},{default:f(()=>[v(h(i(a.row.government_loan_audit,3))+" ",1),d(M,{disable:!o.value,modelValue:a.row.pagIbigLoan,"onUpdate:modelValue":n=>a.row.pagIbigLoan=n,modelModifiers:{number:!0},buttons:""},{default:f(n=>[d(C,{type:"number",modelValue:n.value,"onUpdate:modelValue":u=>n.value=u,modelModifiers:{number:!0},dense:"",autofocus:"",onKeyup:P(n.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["disable","modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),d(y,{key:"NetPay",props:a,"auto-width":""},{default:f(()=>[v(h(p(a.row)),1)]),_:2},1032,["props"]),d(y,{key:"overVale",props:a,"auto-width":""},{default:f(()=>[v(h(a.row.overVale)+" ",1),d(M,{disable:!o.value,modelValue:a.row.overVale,"onUpdate:modelValue":n=>a.row.overVale=n,modelModifiers:{number:!0},buttons:""},{default:f(n=>[d(C,{type:"number",modelValue:n.value,"onUpdate:modelValue":u=>n.value=u,modelModifiers:{number:!0},dense:"",autofocus:"",onKeyup:P(n.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["disable","modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),d(y,{key:"actions","auto-width":"",props:a},{default:f(()=>[d(O,{rows:a.row},null,8,["rows"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["columns","rows","filter","filter-method"]))}},Je={class:"tw-w-12/12 tw-max-w-full tw-mx-auto tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse tw-p-4 tw-mt-0"},mt={__name:"AdminPayrollPage",setup(e){const t=K();return t.currentPage="Payroll Sheet",(l,r)=>(A(),Q("div",Je,[s("div",null,[d(Ye),v(" \xA0 ")])]))}};export{mt as default};
