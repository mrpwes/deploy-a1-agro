import{Q as g}from"./QTd.ed3f8fc5.js";import{ar as y,as as u,r as x,o as d,c,a as e,a5 as l,e as w,a7 as h,a8 as v,d as r,w as n,G as D}from"./index.7755f7c7.js";import{Q as E}from"./QInput.f0fa2469.js";import{Q as B}from"./QTable.50a687ac.js";import{d as S}from"./date.12748281.js";import{u as Q}from"./pageHeader.1dafc285.js";import{u as T,_ as V}from"./ViewApprovalButton.d57613a7.js";import"./use-key-composition.9f749e38.js";import"./focus-manager.c1c8e91e.js";import"./position-engine.151a8476.js";import"./ClosePopup.1a0dd3e2.js";const k=y("dashboard",{state:()=>({totalEmployees:null,employeesCurrentBirthdays:null}),getters:{getTotalEmployees(){return this.totalEmployees}},actions:{async fetchTotalEmployees(){try{const{count:s,error:o}=await u.from("employee").select("*",{count:"exact",head:!0});if(o)throw o;this.totalEmployees=s}catch(s){console.log("Error getting total employees:",s.message)}},async fetchEmployeesBornInCurrentMonth(){try{const{data:s,error:o}=await u.from("employees_born_in_current_month").select("*");if(o)throw o;console.log(s),this.employeesCurrentBirthdays=s}catch(s){console.log("Error getting employees with birthdays in January:",s.message)}}}}),q={class:"tw-flex tw-justify-evenly tw-w-8/12 tw-mx-auto tw-mb-6"},C={class:"tw-grid tw-grid-cols-2 tw-gap-3 tw-text-center"},I={class:"tw-bg-white tw-rounded-3xl tw-shadow-md tw-p-10"},R=e("div",{class:"tw-text-xl tw-font-bold"},"Employees",-1),j={class:"tw-text-lg"},A=e("div",{class:"tw-bg-white tw-rounded-3xl tw-shadow-md tw-p-10"},[e("div",{class:"tw-text-xl tw-font-bold"},"Present"),e("div",{class:"tw-text-lg"},"TODO")],-1),M={class:"tw-bg-white tw-rounded-3xl tw-shadow-md tw-p-10"},P=e("div",{class:"tw-text-center"},[e("div",{class:"tw-text-xl tw-font-bold"},"Birthday")],-1),Y={class:"tw-text-nowrap tw-text-left"},L={class:"tw-w-8/12 tw-mx-auto"},X={__name:"AdminDashboardPage",setup(s){const o=k();o.fetchTotalEmployees();const f=Q();f.currentPage="Dashboard";const i=x(""),m=T();m.getApprovalList(),o.fetchEmployeesBornInCurrentMonth();const _=[{name:"Request ID",required:!0,label:"Request ID",align:"left",field:t=>t.id,format:t=>`${t}`,sortable:!0},{name:"Request Date",align:"center",label:"Request Date",field:t=>t.request_confirmation.application_date,format:t=>S.formatDate(t,"MMM D, YYYY"),sortable:!0},{name:"Subject",align:"center",label:"Subject",field:"subject",sortable:!0},{name:"Description",align:"center",label:"Description",field:"description",sortable:!0},{name:"Recipient",align:"center",label:"Recipient",field:t=>t.recipient.last_name+" "+t.recipient.first_name,sortable:!0},{name:"actions",align:"center",label:"",field:""}];return(t,p)=>(d(),c(h,null,[e("div",q,[e("div",C,[e("div",I,[R,e("div",j,l(w(o).getTotalEmployees),1)]),A]),e("div",null,[e("div",M,[P,(d(!0),c(h,null,v(w(o).employeesCurrentBirthdays,(a,b)=>(d(),c("div",{key:b,class:"tw-grid tw-grid-cols-2 tw-gap-7 tw-justify-between tw-text-end"},[e("div",Y,l(a.first_name)+" "+l(a.last_name),1),e("div",null,l(a.date_of_birth),1)]))),128))])])]),e("div",L,[r(B,{class:"my-sticky-header-table tw-w-11/12 tw-mx-auto tw-mt-6 tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse",flat:"",bordered:"",filter:i.value,columns:_,rows:w(m).getUnarchivedApprovalList,"rows-per-page-options":[10,20,0],"row-key":"name"},{"body-cell-actions":n(a=>[r(g,{key:"actions",class:"tw-w-2/12",props:a},{default:n(()=>[r(V,{rows:a.row},null,8,["rows"])]),_:2},1032,["props"])]),"top-right":n(()=>[r(E,{borderless:"",dense:"",debounce:"300",modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=a=>i.value=a),placeholder:"Search"},{append:n(()=>[r(D,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["filter","rows"])])],64))}};export{X as default};
