import{at as m,au as i,r as h,o,c as r,a as t,a8 as a,e as n,aa as d,ab as p,g as u}from"./index.c0f9d41d.js";import{u as _}from"./pageHeader.76fa7086.js";import"./QInput.5bafdbfb.js";import"./ClosePopup.7d22d6d7.js";import"./QDialog.7c9c19ff.js";import"./viewApproval.1d9c9894.js";import"./use-key-composition.d0293a0f.js";import"./focus-manager.90a99338.js";const y=m("dashboard",{state:()=>({totalEmployees:null,employeesCurrentBirthdays:null}),getters:{getTotalEmployees(){return this.totalEmployees}},actions:{async fetchTotalEmployees(){try{const{count:s,error:e}=await i.from("employee").select("*",{count:"exact",head:!0});if(e)throw e;this.totalEmployees=s}catch(s){console.log("Error getting total employees:",s.message)}},async fetchEmployeesBornInCurrentMonth(){try{const{data:s,error:e}=await i.from("employees_born_in_current_month").select("*");if(e)throw e;console.log(s),this.employeesCurrentBirthdays=s}catch(s){console.log("Error getting employees with birthdays in January:",s.message)}}}}),g={class:"tw-flex tw-justify-evenly tw-w-8/12 tw-mx-auto tw-mb-6"},f={class:"tw-grid tw-grid-cols-2 tw-gap-3 tw-text-center"},x={class:"tw-bg-white tw-rounded-3xl tw-shadow-md tw-p-10"},b=t("div",{class:"tw-text-xl tw-font-bold"},"Employees",-1),v={class:"tw-text-lg"},E=t("div",{class:"tw-bg-white tw-rounded-3xl tw-shadow-md tw-p-10"},[t("div",{class:"tw-text-xl tw-font-bold"},"Present"),t("div",{class:"tw-text-lg"},"TODO")],-1),B={key:0},C={class:"tw-bg-white tw-rounded-3xl tw-shadow-md tw-p-10"},D=t("div",{class:"tw-text-center"},[t("div",{class:"tw-text-xl tw-font-bold"},"Birthday")],-1),P={class:"tw-text-nowrap tw-text-left"},T=t("div",{class:"tw-w-8/12 tw-mx-auto"},null,-1),F={__name:"AdminDashboardPage",setup(s){const e=y();e.fetchTotalEmployees();const c=_();return c.currentPage="Dashboard",h(""),e.fetchEmployeesBornInCurrentMonth(),(k,S)=>(o(),r(d,null,[t("div",g,[t("div",f,[t("div",x,[b,t("div",v,a(n(e).getTotalEmployees),1)]),E]),n(e).employeesCurrentBirthdays&&n(e).employeesCurrentBirthdays.length>0?(o(),r("div",B,[t("div",C,[D,(o(!0),r(d,null,p(n(e).employeesCurrentBirthdays,(l,w)=>(o(),r("div",{key:w,class:"tw-grid tw-grid-cols-2 tw-gap-7 tw-justify-between tw-text-end"},[t("div",P,a(l.first_name)+" "+a(l.last_name),1),t("div",null,a(l.date_of_birth),1)]))),128))])])):u("",!0)]),T],64))}};export{F as default};
