import{u as G}from"./pageHeader.b29c2f83.js";import{u as U,ar as k,as as m,r as f,o as w,c as v,d as l,Q as y,w as d,a as s,aN as z,e as r,a8 as H,f as g,S as $,a5 as x,at as C,G as E}from"./index.504ec86a.js";import{Q as _}from"./QInput.83dad3fc.js";import{Q as S}from"./QTd.6a465a6b.js";import{Q as A}from"./QTable.b7213eba.js";import{w as V,t as q,Q as I}from"./position-engine.224580a6.js";import{b as L}from"./QSelect.b29667b8.js";import{Q as D,C as O}from"./ClosePopup.337d1baa.js";import{Q as B}from"./QForm.590c6937.js";import{u as P}from"./globalNotification.5d4f7813.js";import{Q as R}from"./QCardSection.4fa991c8.js";import{Q as W}from"./QCard.f321d939.js";import{_ as M}from"./addLoan.2c709f4c.js";import"./use-key-composition.c8c0c6cd.js";import"./focus-manager.bec94b0c.js";import"./QList.6e762c59.js";const J=U(),Q=k("emp_governmentLoan",{state:()=>({columns:[{name:"id",align:"center",label:"Loan ID",field:t=>t.id,format:t=>`${t}`,sortable:!0},{name:"application_no",align:"center",label:"Application No.",field:t=>t.application_no,format:t=>`${t}`,sortable:!0},{name:"Loan Type",align:"center",label:"Loan Type",field:t=>t.government_loan_type.government_loan_type_name,format:t=>`${t}`,sortable:!0},{name:"employee",align:"center",label:"Employee",field:t=>t.employee.company_employee_id+" - "+t.employee.last_name+", "+t.employee.first_name,format:t=>`${t}`,sortable:!0},{name:"date_start",align:"center",label:"Date Start",field:t=>t.date_start,format:t=>`${t}`,sortable:!0},{name:"date_end",align:"center",label:"Date End",field:t=>t.date_end,format:t=>`${t}`,sortable:!0},{name:"amortization",align:"center",label:"Amortization",field:t=>t.amortization,format:t=>`${t}`,sortable:!0},{name:"monthly_schedule",align:"center",label:"Monthly Schedule",field:t=>t.half_month_indicator===1?"2nd Half":"1st Half",format:t=>`${t}`,sortable:!0},{name:"actions",align:"center",label:"",field:""}],rows:[],currentEmployeeID:J.getEmployeeId}),getters:{getArchivedLoans(){return this.rows.filter(t=>t.is_archive===!0)},getUnarchivedLoans(){return this.rows.filter(t=>t.is_archive===!1)}},actions:{async fetchGovernmentLoanList(){try{const{data:t,error:e}=await m.from("government_loan").select("*, employee!government_loan_employee_id_fkey(company_employee_id, first_name, middle_name, last_name), government_loan_type(id, government_loan_type_name)").eq("employee_id",this.currentEmployeeID);if(e)throw e;this.rows=t,console.log(t)}catch(t){console.log(t)}}}}),N=P(),K=U(),j=Q(),X=k("emp_govtViewLoan",{state:()=>({selected_row:null,id:null,employeeOption:null,employeeOptions:null,type:null,typeOptions:null,date_start:null,date_end:null,half_month_indicator:null,additional_info:null,amortization:null,total_amount:null,emp_id_modified_by:K.getEmployeeId,is_archive:null,is_editing:!1}),getters:{},actions:{async fetchEmployeeOptions(){try{const{data:t,error:e}=await m.from("employee").select("id, company_employee_id, first_name, middle_name, last_name");if(e)throw e;this.employeeOptions=t}catch(t){console.log(t)}},async fetchGovernmentLoanType(){try{const{data:t,error:e}=await m.from("government_loan_type").select("id, government_loan_type_name");if(e)throw e;this.typeOptions=t}catch(t){console.log(t)}},async updateLoan(){try{const{error:t}=await m.from("government_loan").update({date_start:this.date_start,date_end:this.date_end,half_month_indicator:this.half_month_indicator==="2nd Half",additional_info:this.additional_info,amortization:this.amortization,total_amount:this.total_amount,emp_id_modified_by:this.emp_id_modified_by}).eq("id",this.id);if(t)throw t;N.showSuccessNotification("Successfully updated loan"),j.fetchGovernmentLoanList(),this.is_editing=!1}catch(t){N.showErrorNotification(t.message)}},async archiveLoan(){try{const{error:t}=await m.from("government_loan").update({is_archive:!this.is_archive,emp_id_modified_by:this.emp_id_modified_by}).eq("id",this.id);if(t)throw t;N.showSuccessNotification(`Successfully ${this.is_archive?"Unarchived":"Archived"} loan`),this.is_archive=!this.is_archive,j.fetchGovernmentLoanList()}catch(t){console.log(t)}}}});const Y={class:"!tw-h-min !tw-w-5/12 !tw-max-w-full tw-bg-white tw-p-6"},Z={class:"tw-grid tw-gap-3"},ee=s("div",{id:"section-to-print"},null,-1),te={class:"tw-text-3xl tw-font-extrabold"},ae={class:"tw-text-2xl tw-flex tw-justify-between tw"},le=s("span",{class:"tw-font-bold"},"Application No.",-1),oe={class:"tw-my-auto"},ne={class:"tw-w-64"},ie={class:"tw-flex tw-justify-between"},se={class:"tw-w-52"},re={class:"tw-w-52"},de={class:"tw-w-44"},ue=s("span",{class:"tw-text-gray-500"},"(Optional)",-1),me={class:"tw-flex tw-justify-around"},_e={class:"tw-flex tw-align-middle"},ce=s("div",{class:"tw-my-auto"},"Amortization:",-1),pe=s("div",{class:"tw-w-2"},null,-1),fe={class:"tw-w-32"},ye={class:"tw-flex tw-align-middle"},he=s("div",{class:"tw-my-auto"},"Total Amount:",-1),we=s("div",{class:"tw-w-2"},null,-1),ve={class:"tw-w-32"},F={__name:"ViewLoanButton",props:["rows"],setup(t){const e=X(),u=f(!1);function c(a){e.selected_row=JSON.parse(JSON.stringify(a)),e.id=a&&a.id||null,e.application_no=a&&a.application_no||null,e.employeeOption=a&&a.employee||null,e.type=a&&a.government_loan_type||null,e.date_start=a&&a.date_start||null,e.date_end=a&&a.date_end||null,e.half_month_indicator=(a&&a.half_month_indicator==="2nd Half"?"2nd Half":"1st Half")||null,e.additional_info=a&&a.additional_info||null,e.amortization=a&&a.amortization||null,e.total_amount=a&&a.total_amount||null,e.is_archive=a&&a.is_archive||null,u.value=!0}return e.fetchEmployeeOptions(),e.fetchGovernmentLoanType(),(a,o)=>(w(),v(x,null,[l(y,{style:{"flex-wrap":"nowrap !important"},icon:"visibility",label:"VIEW",onClick:o[0]||(o[0]=n=>c(t.rows))}),l(I,{modelValue:u.value,"onUpdate:modelValue":o[11]||(o[11]=n=>u.value=n),persistent:""},{default:d(()=>[s("div",Y,[l(B,{onSubmit:o[10]||(o[10]=z(n=>r(e).updateLoan(),["prevent"]))},{default:d(()=>[s("div",Z,[ee,s("div",te," View Loan ID: "+H(r(e).id),1),s("div",ae,[s("div",null,[l(_,{rounded:"",standout:"bg-teal text-white",label:"Application No.",modelValue:r(e).application_no,"onUpdate:modelValue":o[1]||(o[1]=n=>r(e).application_no=n),disable:"","input-class":"tw-text-1xl ",autogrow:"",type:"text",required:""},{label:d(()=>[le]),_:1},8,["modelValue"])]),s("div",oe,[s("div",null,[l(L,{rounded:"",standout:"bg-teal text-white",modelValue:r(e).employeeOption,"onUpdate:modelValue":o[2]||(o[2]=n=>r(e).employeeOption=n),disable:"",label:"Employee","use-input":"","hide-selected":"","fill-input":"","hide-bottom-space":"","input-debounce":"0",options:r(e).employeeOptions,"option-label":n=>"first_name"in n?n.company_employee_id+" - "+n.last_name+" "+n.first_name:"",onFilter:a.filterFn,required:"","option-value":a.id,class:"!tw-pb-0; tw-capitalize","popup-content-class":"tw-capitalize"},{"no-option":d(()=>[l(V,null,{default:d(()=>[l(q,{class:"text-grey"},{default:d(()=>[g(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label","onFilter","option-value"])])])]),s("div",ne,[l(L,{rounded:"",standout:"bg-teal text-white",modelValue:r(e).type,"onUpdate:modelValue":o[3]||(o[3]=n=>r(e).type=n),readonly:!r(e).is_editing,label:"Loan Type","use-input":"","hide-selected":"","fill-input":"","hide-bottom-space":"","input-debounce":"0",options:r(e).typeOptions,"option-label":"government_loan_type_name",class:"!tw-pb-0; tw-capitalize;","popup-content-class":"tw-capitalize","emit-value":""},{"no-option":d(()=>[l(V,null,{default:d(()=>[l(q,{class:"text-grey"},{default:d(()=>[g(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","readonly","options"])]),s("div",ie,[s("div",null,[s("div",se,[l(_,{rounded:"",standout:"bg-teal text-white",modelValue:r(e).date_start,"onUpdate:modelValue":o[4]||(o[4]=n=>r(e).date_start=n),readonly:!r(e).is_editing,required:"",label:"Date Start",type:"date","hide-bottom-space":""},null,8,["modelValue","readonly"])])]),s("div",null,[s("div",re,[l(_,{rounded:"",standout:"bg-teal text-white",modelValue:r(e).date_end,"onUpdate:modelValue":o[5]||(o[5]=n=>r(e).date_end=n),readonly:!r(e).is_editing,required:"",label:"Date Start",type:"date","hide-bottom-space":""},null,8,["modelValue","readonly"])])]),s("div",de,[l(L,{rounded:"",standout:"bg-teal text-white",modelValue:r(e).half_month_indicator,"onUpdate:modelValue":o[6]||(o[6]=n=>r(e).half_month_indicator=n),readonly:!r(e).is_editing,required:"",label:"Monthly Schedule",options:["1st Half","2nd Half"],dense:a.dense,"hide-bottom-space":""},null,8,["modelValue","readonly","dense"])])]),s("div",null,[g(" Additional Information: "),ue,s("div",null,[l(_,{rounded:"",standout:"bg-teal text-white",modelValue:r(e).additional_info,"onUpdate:modelValue":o[7]||(o[7]=n=>r(e).additional_info=n),readonly:!r(e).is_editing,type:"textarea"},null,8,["modelValue","readonly"])])]),s("div",me,[s("div",_e,[ce,pe,s("div",fe,[l(_,{rounded:"",standout:"bg-teal text-white",modelValue:r(e).amortization,"onUpdate:modelValue":o[8]||(o[8]=n=>r(e).amortization=n),readonly:!r(e).is_editing,type:"number",required:""},null,8,["modelValue","readonly"])])]),s("div",ye,[he,we,s("div",ve,[l(_,{rounded:"",standout:"bg-teal text-white",modelValue:r(e).total_amount,"onUpdate:modelValue":o[9]||(o[9]=n=>r(e).total_amount=n),readonly:!r(e).is_editing,type:"number",required:""},null,8,["modelValue","readonly"])])])])]),l(D,{align:"right",class:"text-primary noPrint"},{default:d(()=>[$(l(y,{flat:"",label:"CLOSE"},null,512),[[O]])]),_:1})]),_:1})])]),_:1},8,["modelValue"])],64))}};const be={class:"!tw-h-min !tw-w-9/12 !tw-max-w-full tw-bg-white tw-p-6"},ge={class:"tw-flex tw-justify-end tw-pt-6"},Le={__name:"GovernmentLoanTableArchived",setup(t){const e=f(""),u=f(!1),c=Q();return(a,o)=>(w(),v(x,null,[l(y,{icon:"mdi-archive",label:"Archived Gov't Loan",onClick:o[0]||(o[0]=n=>u.value=!0),class:"tw-bg-white"}),l(I,{modelValue:u.value,"onUpdate:modelValue":o[2]||(o[2]=n=>u.value=n),persistent:""},{default:d(()=>[s("div",be,[l(A,{class:"my-sticky-header-table tw-mx-auto tw-mt-6 tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse",flat:"",bordered:"",title:"Archived Government Loan","title-class":["tw-text-xl","tw-font-bold"],columns:r(c).columns,rows:r(c).getArchivedLoans,"rows-per-page-options":[10,20,0],filter:e.value,"row-key":"Loan ID"},{"top-right":d(()=>[l(_,{borderless:"",dense:"",debounce:"300",modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=n=>e.value=n),placeholder:"Search"},{append:d(()=>[l(E,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":d(n=>[l(S,{key:"actions",class:"tw-w-2/12",props:n},{default:d(()=>[l(F,{rows:n.row},null,8,["rows"])]),_:2},1032,["props"])]),_:1},8,["columns","rows","filter"]),s("div",ge,[$(l(y,{flat:"",label:"CLOSE",class:"tw-bg-green-400"},null,512),[[O]])])])]),_:1},8,["modelValue"])],64))}};var xe=C(Le,[["__scopeId","data-v-3e1779de"]]);const Ve={class:"tw-mt-6"},qe={class:"tw-w-11/12 tw-mx-auto tw-flex tw-justify-end tw-mb-5 tw-gap-4"},$e={__name:"GovernmentTable",setup(t){const e=f(""),u=Q();return u.fetchGovernmentLoanList(),(c,a)=>(w(),v("div",Ve,[s("div",qe,[l(xe)]),s("div",null,[l(A,{class:"my-sticky-header-table tw-w-11/12 tw-mx-auto tw-mt-6 tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse",flat:"",bordered:"",title:"Government Loan","title-class":["tw-text-xl","tw-font-bold"],columns:r(u).columns,rows:r(u).getUnarchivedLoans,"rows-per-page-options":[10,20,0],filter:e.value,"row-key":"Loan ID"},{"top-right":d(()=>[l(_,{borderless:"",dense:"",debounce:"300",modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=o=>e.value=o),placeholder:"Search"},{append:d(()=>[l(E,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":d(o=>[l(S,{key:"actions",class:"tw-w-2/12",props:o},{default:d(()=>[l(F,{rows:o.row},null,8,["rows"])]),_:2},1032,["props"])]),_:1},8,["columns","rows","filter"])])]))}};var Se=C($e,[["__scopeId","data-v-3150c0cd"]]);const b=P(),Ae=U(),T=k("emp_viewLoan",{state:()=>({currentEmployeeID:Ae.getEmployeeId,rows:[],is_paying:!1,employeeOption:null,employeeOptions:null,type:null,subject:null,description:null,amount:null,balance:null,payment:null,expectedNewBalance:null,request_id:null,request_is_archive:null,vale:null,partial_to_ar:null,is_archive:null}),getters:{getArchivedLoanList(t){return t.rows.filter(e=>e.is_archive===!0&&e.request_employee_id.id===t.currentEmployeeID)},getUnarchivedLoanList(t){return t.rows.filter(e=>e.is_archive===!1&&e.request_employee_id.id===t.currentEmployeeID)},expectedNewBalance(t){return t.balance===null||t.payment===null?null:t.payment>t.balance?"Negative":t.balance-t.payment}},actions:{async getLoanList(){const{data:t,error:e}=await m.from("request").select(`
          id,
        partial_to_ar!partial_to_ar_request_id_fkey(id, amount, balance, is_archive),
        vale!vale_request_id_fkey(id, amount, balance, is_archive),
        request_employee_id (id, company_employee_id, first_name, last_name),
        request_type_id (id, request_type_name),
        request_subject,
        request_description,
        request_application_date,
        admin_employee_id (id, company_employee_id, first_name, last_name),
        admin_comments,
        admin_confirmation_date,
        change_date,
        is_archive
      `).in("request_type_id.id",["1","2"]);if(e)throw e;this.fetchEmployeeOptions(),this.rows=t},async fetchEmployeeOptions(){try{const{data:t,error:e}=await m.from("employee").select("id, company_employee_id, first_name, middle_name, last_name");if(e)throw e;this.employeeOptions=t}catch(t){console.log(t)}},async getSelectedLoan(t){const{data:e,error:u}=await m.from("request").select(`
          id,
        partial_to_ar!partial_to_ar_request_id_fkey(id, amount, balance),
        vale!vale_request_id_fkey(id, amount, balance),
        request_employee_id (id, company_employee_id, first_name, last_name),
        request_type_id (id, request_type_name),
        request_subject,
        request_description,
        request_application_date,
        admin_employee_id (id, company_employee_id, first_name, last_name),
        admin_approval_status,
        admin_comments,
        admin_confirmation_date,
        change_date,
        is_archive
      `).eq("id",t);if(u)throw u;return e[0]},async insertPayment(){if(this.type.id==1)try{const{error:t}=await m.from("vale").update({balance:this.vale[0].balance-this.payment}).select().eq("id",this.vale[0].id);if(t)throw t;this.is_paying=!1,this.getLoanList(),this.resetForm(),b.showSuccessNotification("Payment successfully deducted.")}catch(t){b.showErrorNotification(t.message)}else if(this.type.id==2)try{const{error:t}=await m.from("partial_to_ar").update({balance:this.partial_to_ar[0].balance-this.payment}).select().eq("id",this.partial_to_ar[0].id);if(t)throw t;this.is_paying=!1,this.getLoanList(),this.resetForm(),b.showSuccessNotification("Payment successfully deducted.")}catch(t){b.showErrorNotification(t.message)}},async archiveLoan(){try{const{error:t}=await m.from("request").update({is_archive:!this.request_is_archive}).eq("id",this.request_id);if(t)throw t;if(this.type.id==1)try{const{error:e}=await m.from("vale").update({is_archive:!this.vale[0].id.is_archive}).eq("id",this.vale[0].id);if(e)throw e;this.getLoanList(),b.showSuccessNotification("Vale Loan successfully archived.")}catch(e){console.log(e)}else if(this.type.id==2)try{const{error:e}=await m.from("partial_to_ar").update({is_archive:!this.partial_to_ar[0].is_archive}).eq("id",this.partial_to_ar[0].id);if(e)throw e;this.getLoanList(),b.showSuccessNotification("Partial to A/R Loan successfully archived.")}catch(e){console.log(e)}}catch(t){console.log(t)}},resetForm(){this.employeeOption=null,this.type=null,this.subject=null,this.description=null,this.amount=null,this.balance=null,this.payment=null,this.vale=null,this.partial_to_ar=null,this.is_archive=null}}});const Ie={class:"tw-m-4 tw-p-6"},Oe=s("div",{class:"tw-text-3xl tw-font-extrabold tw-pb-3"}," View Loan Form ",-1),Ne={class:"tw-flex tw-mb-3"},Ue=s("div",{class:"tw-content-center tw-mr-3"},"Employee Name:",-1),ke={class:"tw-my-auto"},Ee={class:"tw-flex tw-mb-3"},De=s("div",{class:"tw-content-center tw-mr-3"},"Type:",-1),Qe={class:"tw-flex tw-mb-3"},Te=s("div",{class:"tw-content-center tw-mr-3"},"Subject:",-1),je={class:"tw-px-2"},Ge=s("div",null,"Description:",-1),ze={class:"tw-pb-3 tw-px-2"},Ce={class:"tw-flex tw-mb-3"},Be=s("div",{class:"tw-content-center tw-mr-3"},"Total Amount:",-1),Pe={class:"tw-px-2"},Fe={class:"tw-flex tw-mb-3"},He=s("div",{class:"tw-content-center tw-mr-3"},"Balance:",-1),Re={class:"tw-px-2"},We={__name:"ViewLoanButtonV2",props:["rows"],setup(t){const e=T(),u=f(!1);function c(a){e.employeeOption=a&&a.request_employee_id||null,e.type=a&&a.request_type_id||null,e.subject=a&&a.request_subject||null,e.description=a&&a.request_description||null,e.amount=a&&a.vale&&a.vale[0]&&Object.keys(a.vale[0]).length>0?a.vale[0].amount:a.partial_to_ar[0].amount||null,e.balance=a&&a.vale&&a.vale[0]&&Object.keys(a.vale[0]).length>0?a.vale[0].balance:a.partial_to_ar[0].balance||null,e.vale=a&&a.vale&&a.vale[0]?a.vale:null,e.partial_to_ar=a&&a.partial_to_ar&&a.partial_to_ar[0]?a.partial_to_ar:null,e.request_id=a&&a.id||null,e.request_is_archive=a&&a.is_archive!==void 0?a.is_archive:null,e.is_paying=!1}return(a,o)=>(w(),v(x,null,[l(y,{style:{"flex-wrap":"nowrap !important"},icon:"visibility",label:"VIEW",onClick:o[0]||(o[0]=n=>{c(t.rows),u.value=!0})}),l(I,{modelValue:u.value,"onUpdate:modelValue":o[9]||(o[9]=n=>u.value=n),persistent:""},{default:d(()=>[l(W,{class:"min-width: 500px"},{default:d(()=>[l(B,{onSubmit:o[8]||(o[8]=z(n=>r(e).insertPayment(),["prevent"])),autofocus:""},{default:d(()=>[s("div",Ie,[l(R,{class:"tw-pt-0 tw-pl-0"},{default:d(()=>[Oe]),_:1}),s("div",Ne,[Ue,s("div",ke,[s("div",null,[l(L,{rounded:"",standout:"bg-teal text-white",modelValue:r(e).employeeOption,"onUpdate:modelValue":o[1]||(o[1]=n=>r(e).employeeOption=n),disable:"","use-input":"","hide-selected":"","fill-input":"","hide-bottom-space":"","input-debounce":"0",options:r(e).employeeOptions,"option-label":n=>"first_name"in n?n.company_employee_id+" - "+n.last_name+" "+n.first_name:"",onFilter:a.filterFn,required:"","option-value":a.id,class:"!tw-pb-0; tw-capitalize","popup-content-class":"tw-capitalize"},{"no-option":d(()=>[l(V,null,{default:d(()=>[l(q,{class:"text-grey"},{default:d(()=>[g(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label","onFilter","option-value"])])])]),s("div",Ee,[De,l(L,{rounded:"",standout:"bg-teal text-white",modelValue:r(e).type,"onUpdate:modelValue":o[2]||(o[2]=n=>r(e).type=n),disable:"",required:"","use-input":"","hide-selected":"","fill-input":"","hide-bottom-space":"","input-debounce":"0",options:r(e).typeOptions,"option-label":"request_type_name",class:"!tw-pb-0; tw-capitalize;","popup-content-class":"tw-capitalize","emit-value":""},{"no-option":d(()=>[l(V,null,{default:d(()=>[l(q,{class:"text-grey"},{default:d(()=>[g(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),s("div",Qe,[Te,s("div",je,[l(_,{rounded:"",standout:"bg-teal text-white",modelValue:r(e).subject,"onUpdate:modelValue":o[3]||(o[3]=n=>r(e).subject=n),disable:"",required:"",autogrow:"","hide-bottom-space":"",class:"tw-max-w-full"},null,8,["modelValue"])])]),s("div",null,[Ge,s("div",ze,[l(_,{rounded:"",standout:"bg-teal text-white",modelValue:r(e).description,"onUpdate:modelValue":o[4]||(o[4]=n=>r(e).description=n),disable:"",required:"",type:"textarea","hide-bottom-space":""},null,8,["modelValue"])])]),s("div",Ce,[Be,s("div",Pe,[l(_,{rounded:"",standout:"bg-teal text-white",type:"number",modelValue:r(e).amount,"onUpdate:modelValue":o[5]||(o[5]=n=>r(e).amount=n),disable:"",required:"",class:"tw-max-w-full"},null,8,["modelValue"])])]),s("div",Fe,[He,s("div",Re,[l(_,{rounded:"",standout:"bg-teal text-white",type:"number",modelValue:r(e).balance,"onUpdate:modelValue":o[6]||(o[6]=n=>r(e).balance=n),disable:"",required:"",class:"tw-max-w-full"},null,8,["modelValue"])])])]),l(D,{align:"right",class:"text-primary noPrint"},{default:d(()=>[$(l(y,{flat:"",label:"CLOSE",onClick:o[7]||(o[7]=n=>{r(e).is_paying=!1,r(e).resetForm()})},null,512),[[O]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Me={class:"!tw-h-min !tw-w-8/12 !tw-max-w-full tw-bg-white tw-p-6"},Je=s("div",{class:"tw-col-span-4 tw-text-3xl tw-font-extrabold tw-pb-3"}," Archived Loan ",-1),Ke={__name:"ArchivedLoanButton",setup(t){const e=T(),u=f(!1),c=f("");function a(i){return i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function o(i){return a(i[0].amount+"/"+i[0].balance)}const n=[{name:"Loan ID",required:!0,label:"Loan ID",align:"left",field:i=>i.id,format:i=>`${i}`,sortable:!0},{name:"Loan Type",align:"center",label:"Loan Type",field:i=>i.request_type_id.request_type_name,format:i=>`${i}`,sortable:!0},{name:"Description",align:"center",label:"Description",field:i=>i.request_description,sortable:!0},{name:"Recipient",align:"center",label:"Recipient",field:i=>i.request_employee_id.company_employee_id+" - "+i.request_employee_id.first_name+" "+i.request_employee_id.last_name,sortable:!0},{name:"Issuer",align:"center",label:"Issuer",field:i=>i.admin_employee_id.company_employee_id+" - "+i.admin_employee_id.first_name+" "+i.admin_employee_id.last_name,sortable:!0},{name:"Amount",align:"center",label:"Amount",field:i=>i.vale[0]?o(i.vale):o(i.partial_to_ar),sortable:!0},{name:"actions",align:"center",label:"",field:""}];return(i,h)=>(w(),v(x,null,[l(y,{icon:"mdi-archive",label:"Archived Loan",onClick:h[0]||(h[0]=p=>u.value=!0),class:"tw-bg-white"}),l(I,{modelValue:u.value,"onUpdate:modelValue":h[1]||(h[1]=p=>u.value=p),persistent:""},{default:d(()=>[s("div",Me,[Je,l(A,{class:"my-sticky-header-table tw-w-11/12 tw-mx-auto tw-mt-6 tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse",flat:"",bordered:"",title:"Company Loan","title-class":["tw-text-xl","tw-font-bold"],filter:c.value,columns:n,rows:r(e).getArchivedLoanList,"rows-per-page-options":[10,20,0],"row-key":"Loan ID"},{"body-cell-actions":d(p=>[l(S,{key:"actions",class:"tw-w-2/12",props:p},{default:d(()=>[l(M,{rows:p.row},null,8,["rows"])]),_:2},1032,["props"])]),_:1},8,["filter","rows"]),l(D,{align:"right",class:"text-primary"},{default:d(()=>[$(l(y,{flat:"",label:"Cancel"},null,512),[[O]])]),_:1})])]),_:1},8,["modelValue"])],64))}},Xe={class:"tw-w-11/12 tw-mx-auto tw-flex tw-justify-end tw-mb-5 tw-gap-4"},Ye={__name:"AdminLoanListPage",setup(t){const e=G();e.currentPage="Loan List";const u=T();u.getLoanList();function c(i){return i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}const a=f("");function o(i){return c(i[0].balance+"/"+i[0].amount)}const n=[{name:"Loan ID",required:!0,label:"Loan ID",align:"left",field:i=>i.id,format:i=>`${i}`,sortable:!0},{name:"Loan Type",align:"center",label:"Loan Type",field:i=>i.request_type_id.request_type_name,format:i=>`${i}`,sortable:!0},{name:"request_subject",align:"center",label:"Subject",field:i=>i.request_subject,format:i=>`${i}`,sortable:!0},{name:"Recipient",align:"center",label:"Recipient",field:i=>i.request_employee_id.company_employee_id+" - "+i.request_employee_id.first_name+" "+i.request_employee_id.last_name,sortable:!0},{name:"Issuer",align:"center",label:"Issuer",field:i=>i.admin_employee_id.company_employee_id+" - "+i.admin_employee_id.first_name+" "+i.admin_employee_id.last_name,sortable:!0},{name:"Amount",align:"center",label:"Balance / Total Amount",field:i=>i.vale[0]?o(i.vale):o(i.partial_to_ar),sortable:!0},{name:"actions",align:"center",label:"",field:""}];return(i,h)=>(w(),v(x,null,[s("div",Xe,[l(Ke)]),l(A,{class:"my-sticky-header-table tw-w-11/12 tw-mx-auto tw-mt-6 tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse",flat:"",bordered:"",title:"Company Loan","title-class":["tw-text-xl","tw-font-bold"],filter:a.value,columns:n,rows:r(u).getUnarchivedLoanList,"rows-per-page-options":[10,20,0],"row-key":"Loan ID"},{"top-right":d(()=>[l(_,{borderless:"",dense:"",debounce:"300",modelValue:a.value,"onUpdate:modelValue":h[0]||(h[0]=p=>a.value=p),placeholder:"Search"},{append:d(()=>[l(E,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":d(p=>[l(S,{key:"actions",class:"tw-w-2/12",props:p},{default:d(()=>[l(We,{rows:p.row},null,8,["rows"])]),_:2},1032,["props"])]),default:d(()=>[g(" > ")]),_:1},8,["filter","rows"])],64))}},ft={__name:"LoanPage",setup(t){const e=G();return e.currentPage="Loan List",(u,c)=>(w(),v("div",null,[l(Ye),l(Se)]))}};export{ft as default};
