import{Q as _}from"./QTd.8b5dee8d.js";import{ar as g,as as p,r as f,o as l,c as n,a as t,a8 as i,e as r,a5 as h,a6 as b,g as x,d as a,w as d,G as v}from"./index.fa342762.js";import{Q as E}from"./QInput.d41ba563.js";import{Q as B}from"./QTable.0d774183.js";import{u as C}from"./pageHeader.10d9d4fd.js";import{u as V,_ as k}from"./ViewApprovalButton.0b48ad10.js";import"./use-key-composition.ddbcd19f.js";import"./focus-manager.09b3f23b.js";import"./QList.21e76d84.js";import"./QSelect.9e704e12.js";import"./position-engine.573b6235.js";import"./QDate.3f2630ec.js";import"./QPopupProxy.93ccc85a.js";import"./date.56c1f476.js";import"./ClosePopup.bcad9a93.js";import"./globalNotification.d7c9769f.js";const Q=g("dashboard",{state:()=>({totalEmployees:null,employeesCurrentBirthdays:null}),getters:{getTotalEmployees(){return this.totalEmployees}},actions:{async fetchTotalEmployees(){try{const{count:o,error:e}=await p.from("employee").select("*",{count:"exact",head:!0});if(e)throw e;this.totalEmployees=o}catch(o){console.log("Error getting total employees:",o.message)}},async fetchEmployeesBornInCurrentMonth(){try{const{data:o,error:e}=await p.from("employees_born_in_current_month").select("*");if(e)throw e;console.log(o),this.employeesCurrentBirthdays=o}catch(o){console.log("Error getting employees with birthdays in January:",o.message)}}}}),T={class:"tw-flex tw-justify-evenly tw-w-8/12 tw-mx-auto tw-mb-6"},D={class:"tw-grid tw-grid-cols-2 tw-gap-3 tw-text-center"},S={class:"tw-bg-white tw-rounded-3xl tw-shadow-md tw-p-10"},P=t("div",{class:"tw-text-xl tw-font-bold"},"Employees",-1),A={class:"tw-text-lg"},I=t("div",{class:"tw-bg-white tw-rounded-3xl tw-shadow-md tw-p-10"},[t("div",{class:"tw-text-xl tw-font-bold"},"Present"),t("div",{class:"tw-text-lg"},"TODO")],-1),L={key:0},N={class:"tw-bg-white tw-rounded-3xl tw-shadow-md tw-p-10"},j=t("div",{class:"tw-text-center"},[t("div",{class:"tw-text-xl tw-font-bold"},"Birthday")],-1),H={class:"tw-text-nowrap tw-text-left"},M={class:"tw-w-8/12 tw-mx-auto"},st={__name:"AdminDashboardPage",setup(o){const e=Q();e.fetchTotalEmployees();const u=C();u.currentPage="Dashboard";const c=f(""),w=V();return w.getRequestList(),e.fetchEmployeesBornInCurrentMonth(),(O,m)=>(l(),n(h,null,[t("div",T,[t("div",D,[t("div",S,[P,t("div",A,i(r(e).getTotalEmployees),1)]),I]),r(e).employeesCurrentBirthdays&&r(e).employeesCurrentBirthdays.length>0?(l(),n("div",L,[t("div",N,[j,(l(!0),n(h,null,b(r(e).employeesCurrentBirthdays,(s,y)=>(l(),n("div",{key:y,class:"tw-grid tw-grid-cols-2 tw-gap-7 tw-justify-between tw-text-end"},[t("div",H,i(s.first_name)+" "+i(s.last_name),1),t("div",null,i(s.date_of_birth),1)]))),128))])])):x("",!0)]),t("div",M,[a(B,{class:"my-sticky-header-table tw-w-11/12 tw-mx-auto tw-mt-6 tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse",flat:"",bordered:"",filter:c.value,columns:r(w).columns,rows:r(w).getUnarchivedApprovalList,"rows-per-page-options":[10,20,0],"row-key":"name"},{"body-cell-actions":d(s=>[a(_,{key:"actions",class:"tw-w-2/12",props:s},{default:d(()=>[a(k,{rows:s.row},null,8,["rows"])]),_:2},1032,["props"])]),"top-right":d(()=>[a(E,{borderless:"",dense:"",debounce:"300",modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=s=>c.value=s),placeholder:"Search"},{append:d(()=>[a(v,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["filter","columns","rows"])])],64))}};export{st as default};
