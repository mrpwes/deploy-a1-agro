import{Q as c}from"./QTd.a9c11184.js";import{u as m,ar as d,as as n,o as u,c as w,d as r,w as s,e as p,a5 as _,a as h,G as f}from"./index.2cf10682.js";import{Q as y}from"./QInput.593f463a.js";import{Q as g}from"./QTable.fc22db06.js";import{u as b}from"./pageHeader.8f3bb32f.js";import{_ as S}from"./ViewApprovalButton.548dff62.js";import"./ClosePopup.b3a9f460.js";import"./position-engine.b68752fb.js";import{u as q}from"./viewApproval.db01a3d5.js";import"./QCardSection.2d065f01.js";import"./QSelect.862e4161.js";import"./QForm.c34d064b.js";import"./QCard.dee7c8a3.js";import"./use-key-composition.6156933d.js";import"./focus-manager.c6d20410.js";import"./QList.f8ee73cb.js";import"./QDate.f531f1dd.js";import"./QPopupProxy.60b7cd65.js";import"./date.13f4c48f.js";import"./globalNotification.4b844c52.js";const v=m();d("addApproval",{state:()=>({recipient:null,recipientOptions:null,issuer:null,issuerOptions:null,type:null,typeOptions:null,subject:null,description:null,current_user_id:v.getEmployeeId,insertRequestConfirmationID:null}),getters:{},actions:{async fetchEmployeeOptions(){try{const{data:e,error:t}=await n.from("employee").select("id, company_employee_id, first_name, middle_name, last_name");if(t)throw t;this.recipientOptions=e,this.issuerOptions=e}catch(e){console.log(e)}},async fetchRequestTypeOptions(){try{const{data:e,error:t}=await n.from("request_type").select("id, request_type_name");if(t)throw t;this.typeOptions=e}catch(e){console.log(e)}},async insertRequestForm(){try{const{data:e,error:t}=await n.from("request").insert([{request_employee_id:this.recipient.id,request_type_id:this.type.id,request_date:new Date().toLocaleDateString("en-US"),request_subject:this.subject,request_description:this.description,request_application_date:new Date().toLocaleDateString("en-US"),admin_employee_id:this.issuer.id,admin_approval_status:"Pending",admin_comments:"Pending",admin_confirmation_date:new Date().toLocaleDateString("en-US"),change_date:new Date().toLocaleDateString("en-US"),is_archive:!1}]);if(t)throw t}catch(e){console.log(e)}}}});const A=h("div",{class:"tw-w-11/12 tw-mx-auto tw-flex tw-justify-end tw-mb-5 tw-gap-4"},null,-1),$={__name:"AdminApprovalListPage",setup(e){const t=b();t.currentPage="Approval List";const a=q();return a.getRequestList(),(i,l)=>(u(),w(_,null,[A,r(g,{class:"my-sticky-header-table tw-w-11/12 tw-mx-auto tw-mt-6 tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse",flat:"",bordered:"",filter:i.tableSearch,columns:p(a).columns,rows:p(a).getUnarchivedApprovalList,"rows-per-page-options":[10,20,0],"row-key":"name"},{"body-cell-actions":s(o=>[r(c,{key:"actions",class:"tw-w-2/12",props:o},{default:s(()=>[r(S,{rows:o.row},null,8,["rows"])]),_:2},1032,["props"])]),"top-right":s(()=>[r(y,{borderless:"",dense:"",debounce:"300",modelValue:i.tableSearch,"onUpdate:modelValue":l[0]||(l[0]=o=>i.tableSearch=o),placeholder:"Search"},{append:s(()=>[r(f,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["filter","columns","rows"])],64))}};export{$ as default};
