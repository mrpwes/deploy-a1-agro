import{r as v,o as f,c as g,d as l,Q as _,w as d,a as i,e as o,S as x,a5 as S,aN as k,f as y,ar as D,as as b,u as Q,a8 as R,n as M,a7 as T,at as F,G}from"./index.2cf10682.js";import{Q as p}from"./QInput.593f463a.js";import{Q as O}from"./QTd.a9c11184.js";import{Q as q}from"./QTable.fc22db06.js";import{u as W}from"./pageHeader.8f3bb32f.js";import{u as j,_ as B,a as J}from"./addLoan.e58d2d62.js";import{Q as U,C as L}from"./ClosePopup.b3a9f460.js";import{Q as A,w as V,t as $}from"./position-engine.b68752fb.js";import{Q as K}from"./QCardSection.2d065f01.js";import{b as h}from"./QSelect.862e4161.js";import{Q as N}from"./QForm.c34d064b.js";import{Q as X}from"./QCard.dee7c8a3.js";import{u as H}from"./globalNotification.4b844c52.js";import"./use-key-composition.6156933d.js";import"./focus-manager.c6d20410.js";import"./QList.f8ee73cb.js";const Y={class:"!tw-h-min !tw-w-8/12 !tw-max-w-full tw-bg-white tw-p-6"},Z=i("div",{class:"tw-col-span-4 tw-text-3xl tw-font-extrabold tw-pb-3"}," Archived Loan ",-1),ee={__name:"ArchivedLoanButton",setup(a){const e=j(),u=v(!1),m=v("");function n(s){return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function t(s){return n(s[0].amount+"/"+s[0].balance)}const r=[{name:"Loan ID",required:!0,label:"Loan ID",align:"left",field:s=>s.id,format:s=>`${s}`,sortable:!0},{name:"Loan Type",align:"center",label:"Loan Type",field:s=>s.request_type_id.request_type_name,format:s=>`${s}`,sortable:!0},{name:"Description",align:"center",label:"Description",field:s=>s.request_description,sortable:!0},{name:"Recipient",align:"center",label:"Recipient",field:s=>s.request_employee_id.company_employee_id+" - "+s.request_employee_id.first_name+" "+s.request_employee_id.last_name,sortable:!0},{name:"Issuer",align:"center",label:"Issuer",field:s=>s.admin_employee_id.company_employee_id+" - "+s.admin_employee_id.first_name+" "+s.admin_employee_id.last_name,sortable:!0},{name:"Amount",align:"center",label:"Amount",field:s=>s.vale[0]?t(s.vale):t(s.partial_to_ar),sortable:!0},{name:"actions",align:"center",label:"",field:""}];return(s,c)=>(f(),g(S,null,[l(_,{icon:"mdi-archive",label:"Archived Loan",onClick:c[0]||(c[0]=w=>u.value=!0),class:"tw-bg-white"}),l(A,{modelValue:u.value,"onUpdate:modelValue":c[1]||(c[1]=w=>u.value=w),persistent:""},{default:d(()=>[i("div",Y,[Z,l(q,{class:"my-sticky-header-table tw-w-11/12 tw-mx-auto tw-mt-6 tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse",flat:"",bordered:"",title:"Company Loan","title-class":["tw-text-xl","tw-font-bold"],filter:m.value,columns:r,rows:o(e).getArchivedLoanList,"rows-per-page-options":[10,20,0],"row-key":"Loan ID"},{"body-cell-actions":d(w=>[l(O,{key:"actions",class:"tw-w-2/12",props:w},{default:d(()=>[l(B,{rows:w.row},null,8,["rows"])]),_:2},1032,["props"])]),_:1},8,["filter","rows"]),l(U,{align:"right",class:"text-primary"},{default:d(()=>[x(l(_,{flat:"",label:"Cancel"},null,512),[[L]])]),_:1})])]),_:1},8,["modelValue"])],64))}},te={class:"tw-m-4"},oe=i("div",{class:"tw-text-3xl tw-font-extrabold tw-pb-3"}," Add Loan Form ",-1),le={class:"tw-flex tw-mb-3"},ae=i("div",{class:"tw-content-center tw-mr-3"},"Employee Name:",-1),ne={class:"tw-flex tw-mb-3"},ie=i("div",{class:"tw-content-center tw-mr-3"},"Type:",-1),se={class:"tw-flex tw-mb-3"},de=i("div",{class:"tw-content-center tw-mr-3"},"Subject:",-1),re={class:"tw-px-2"},ue=i("div",null,"Description:",-1),me={class:"tw-pb-3 tw-px-2"},pe={class:"tw-flex tw-mb-3"},_e=i("div",{class:"tw-content-center tw-mr-3"},"Amount:",-1),ce={class:"tw-px-2"},we={__name:"AddLoanButton",setup(a){const e=J();e.fetchEmployeeOptions(),e.fetchRequestTypeOptions();function u(m,n){n(()=>{console.log(m);const t=m.toLowerCase();e.selectorEmployeeOptions=e.employeeOptions.filter(r=>String(r.company_employee_id).toLowerCase().indexOf(t)>-1)})}return(m,n)=>(f(),g(S,null,[l(_,{icon:"mdi-plus",label:"Add Loan",onClick:n[0]||(n[0]=t=>o(e).addLoanDialog=!0),class:"tw-bg-white"}),l(A,{modelValue:o(e).addLoanDialog,"onUpdate:modelValue":n[6]||(n[6]=t=>o(e).addLoanDialog=t),persistent:""},{default:d(()=>[l(X,{class:"min-width: 500px"},{default:d(()=>[l(N,{onSubmit:k(o(e).insertRequestForm,["prevent"]),autofocus:""},{default:d(()=>[i("div",te,[l(K,{class:"tw-pt-0 tw-pl-0"},{default:d(()=>[oe]),_:1}),i("div",le,[ae,l(h,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).employeeOption,"onUpdate:modelValue":n[1]||(n[1]=t=>o(e).employeeOption=t),"use-input":"",required:"","hide-selected":"","fill-input":"","hide-bottom-space":"","input-debounce":"0",options:o(e).selectorEmployeeOptions,"option-label":t=>"first_name"in t?t.company_employee_id+" - "+t.last_name:"",onFilter:u,"option-value":m.id,class:"!tw-pb-0; tw-capitalize","popup-content-class":"tw-capitalize"},{"no-option":d(()=>[l(V,null,{default:d(()=>[l($,{class:"text-grey"},{default:d(()=>[y(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label","option-value"])]),i("div",ne,[ie,l(h,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).type,"onUpdate:modelValue":n[2]||(n[2]=t=>o(e).type=t),required:"","use-input":"","hide-selected":"","fill-input":"","hide-bottom-space":"","input-debounce":"0",options:o(e).typeOptions,"option-label":"request_type_name",class:"!tw-pb-0; tw-capitalize;","popup-content-class":"tw-capitalize","emit-value":""},{"no-option":d(()=>[l(V,null,{default:d(()=>[l($,{class:"text-grey"},{default:d(()=>[y(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),i("div",se,[de,i("div",re,[l(p,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).subject,"onUpdate:modelValue":n[3]||(n[3]=t=>o(e).subject=t),required:"",autogrow:"","hide-bottom-space":"",class:"tw-max-w-full"},null,8,["modelValue"])])]),i("div",null,[ue,i("div",me,[l(p,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).description,"onUpdate:modelValue":n[4]||(n[4]=t=>o(e).description=t),required:"",type:"textarea","hide-bottom-space":""},null,8,["modelValue"])])]),i("div",pe,[_e,i("div",ce,[l(p,{rounded:"",standout:"bg-teal text-white",type:"number",modelValue:o(e).amount,"onUpdate:modelValue":n[5]||(n[5]=t=>o(e).amount=t),required:"",class:"tw-max-w-full"},null,8,["modelValue"])])])]),l(U,{align:"right",class:"text-primary"},{default:d(()=>[x(l(_,{flat:"",label:"Cancel",onClick:m.resetForm},null,8,["onClick"]),[[L]]),l(_,{flat:"",class:"tw-bg-green-400",label:"Add Loan",type:"submit",disable:o(e).disableButtonExisting},null,8,["disable"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])],64))}},C=D("governmentLoan",{state:()=>({columns:[{name:"id",align:"center",label:"Loan ID",field:a=>a.id,format:a=>`${a}`,sortable:!0},{name:"application_no",align:"center",label:"Application No.",field:a=>a.application_no,format:a=>`${a}`,sortable:!0},{name:"Loan Type",align:"center",label:"Loan Type",field:a=>a.government_loan_type.government_loan_type_name,format:a=>`${a}`,sortable:!0},{name:"employee",align:"center",label:"Employee",field:a=>a.employee.company_employee_id+" - "+a.employee.last_name+", "+a.employee.first_name,format:a=>`${a}`,sortable:!0},{name:"date_start",align:"center",label:"Date Start",field:a=>a.date_start,format:a=>`${a}`,sortable:!0},{name:"date_end",align:"center",label:"Date End",field:a=>a.date_end,format:a=>`${a}`,sortable:!0},{name:"amortization",align:"center",label:"Amortization",field:a=>a.amortization,format:a=>`${a}`,sortable:!0},{name:"monthly_schedule",align:"center",label:"Monthly Schedule",field:a=>a.half_month_indicator===1?"2nd Half":"1st Half",format:a=>`${a}`,sortable:!0},{name:"actions",align:"center",label:"",field:""}],rows:[]}),getters:{getArchivedLoans(){return this.rows.filter(a=>a.is_archive===!0)},getUnarchivedLoans(){return this.rows.filter(a=>a.is_archive===!1)}},actions:{async fetchGovernmentLoanList(){try{const{data:a,error:e}=await b.from("government_loan").select("*, employee!government_loan_employee_id_fkey(company_employee_id, first_name, middle_name, last_name), government_loan_type(id, government_loan_type_name)");if(e)throw e;this.rows=a,console.log(a)}catch(a){console.log(a)}}}}),fe=Q(),ye=C(),E=H(),be=D("addGovernmentLoan",{state:()=>({employeeOption:null,employeeOptions:null,type:null,typeOptions:null,employee_id:null,government_loan_type_id:null,application_no:null,additional_info:null,payments_made:null,date_start:null,date_end:null,amortization:null,total_amount:null,half_month_indicator:null,emp_id_modified_by:fe.getEmployeeId,addLoanDialog:!1}),getters:{},actions:{async fetchEmployeeOptions(){try{const{data:a,error:e}=await b.from("employee").select("id, company_employee_id, first_name, middle_name, last_name");if(e)throw e;this.employeeOptions=a}catch(a){console.log(a)}},async fetchGovernmentLoanType(){try{const{data:a,error:e}=await b.from("government_loan_type").select("id, government_loan_type_name");if(e)throw e;this.typeOptions=a}catch(a){console.log(a)}},async addLoan(){try{const{error:a}=await b.from("government_loan").insert([{employee_id:this.employeeOption.id,government_loan_type_id:this.type.id,application_no:this.application_no,additional_info:this.additional_info,date_start:this.date_start,date_end:this.date_end,amortization:this.amortization,total_amount:this.total_amount,half_month_indicator:this.half_month_indicator==="2nd Half",emp_id_modified_by:this.emp_id_modified_by,is_archive:!1}]);if(a)throw a;E.showSuccessNotification("Government Loan Added Successfully"),this.resetForm(),this.addLoanDialog=!1,ye.fetchGovernmentLoanList()}catch(a){console.log(a),E.showErrorNotification("Failed to add Government Loan "+a.message)}},resetForm(){this.employeeOption=null,this.type=null,this.employee_id=null,this.government_loan_type_id=null,this.application_no=null,this.additional_info=null,this.payments_made=null,this.date_start=null,this.date_end=null,this.amortization=null,this.total_amount=null,this.half_month_indicator=null,this.emp_id_modified_by=null}}}),he={class:"!tw-h-min !tw-w-5/12 !tw-max-w-full tw-bg-white tw-px-6 tw-pb-3"},ve={class:"tw-grid tw-gap-3"},ge=i("div",{id:"section-to-print"},null,-1),xe=i("div",{class:"tw-text-3xl tw-font-extrabold"},"Add Loan",-1),Le={class:"tw-text-2xl tw-flex tw-justify-between tw"},Ve=i("span",{class:"tw-font-bold"},"Application No.",-1),$e={class:"tw-my-auto"},Se={class:"tw-w-64"},Ae={class:"tw-flex tw-justify-between"},Oe={class:"tw-w-52"},qe={class:"tw-w-52"},Ue={class:"tw-w-44"},Ce=i("span",{class:"tw-text-gray-500"},"(Optional)",-1),ze={class:"tw-flex tw-justify-around"},ke={class:"tw-flex tw-align-middle"},De=i("div",{class:"tw-my-auto"},"Amortization:",-1),Ge=i("div",{class:"tw-w-2"},null,-1),Ne={class:"tw-w-32"},Te={class:"tw-flex tw-align-middle"},Ee=i("div",{class:"tw-my-auto"},"Total Amount:",-1),Ie=i("div",{class:"tw-w-2"},null,-1),Qe={class:"tw-w-32"},Fe={__name:"AddLoan",setup(a){const e=be();e.fetchEmployeeOptions(),e.fetchGovernmentLoanType();function u(m,n){n(()=>{console.log(m);const t=m.toLowerCase();e.selectorEmployeeOptions=e.employeeOptions.filter(r=>String(r.company_employee_id).toLowerCase().indexOf(t)>-1)})}return(m,n)=>(f(),g(S,null,[l(_,{icon:"mdi-plus",label:"Add Gov't Loan",onClick:n[0]||(n[0]=t=>o(e).addLoanDialog=!0),class:"tw-bg-white"}),l(A,{modelValue:o(e).addLoanDialog,"onUpdate:modelValue":n[10]||(n[10]=t=>o(e).addLoanDialog=t),persistent:""},{default:d(()=>[i("div",he,[l(N,{onSubmit:k(o(e).addLoan,["prevent"]),autofocus:""},{default:d(()=>[i("div",ve,[ge,xe,i("div",Le,[i("div",null,[l(p,{rounded:"",standout:"bg-teal text-white",label:"Application No.",modelValue:o(e).application_no,"onUpdate:modelValue":n[1]||(n[1]=t=>o(e).application_no=t),"input-class":"tw-text-1xl ",autogrow:"",type:"text",required:""},{label:d(()=>[Ve]),_:1},8,["modelValue"])]),i("div",$e,[i("div",null,[l(h,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).employeeOption,"onUpdate:modelValue":n[2]||(n[2]=t=>o(e).employeeOption=t),label:"Employee","use-input":"","hide-selected":"","fill-input":"","hide-bottom-space":"","input-debounce":"0",options:o(e).employeeOptions,"option-label":t=>"first_name"in t?t.company_employee_id+" - "+t.last_name+" "+t.first_name:"",onFilter:u,required:"","option-value":m.id,class:"!tw-pb-0; tw-capitalize","popup-content-class":"tw-capitalize"},{"no-option":d(()=>[l(V,null,{default:d(()=>[l($,{class:"text-grey"},{default:d(()=>[y(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label","option-value"])])])]),i("div",Se,[l(h,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).type,"onUpdate:modelValue":n[3]||(n[3]=t=>o(e).type=t),label:"Loan Type","use-input":"","hide-selected":"","fill-input":"","hide-bottom-space":"","input-debounce":"0",options:o(e).typeOptions,"option-label":"government_loan_type_name",class:"!tw-pb-0; tw-capitalize;","popup-content-class":"tw-capitalize","emit-value":""},{"no-option":d(()=>[l(V,null,{default:d(()=>[l($,{class:"text-grey"},{default:d(()=>[y(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),i("div",Ae,[i("div",null,[i("div",Oe,[l(p,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).date_start,"onUpdate:modelValue":n[4]||(n[4]=t=>o(e).date_start=t),required:"",label:"Date Start",type:"date","hide-bottom-space":""},null,8,["modelValue"])])]),i("div",null,[i("div",qe,[l(p,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).date_end,"onUpdate:modelValue":n[5]||(n[5]=t=>o(e).date_end=t),required:"",label:"Date Start",type:"date","hide-bottom-space":""},null,8,["modelValue"])])]),i("div",Ue,[l(h,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).half_month_indicator,"onUpdate:modelValue":n[6]||(n[6]=t=>o(e).half_month_indicator=t),required:"",label:"Monthly Schedule",options:["1st Half","2nd Half"],dense:m.dense,"hide-bottom-space":""},null,8,["modelValue","dense"])])]),i("div",null,[y(" Additional Information: "),Ce,i("div",null,[l(p,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).additional_info,"onUpdate:modelValue":n[7]||(n[7]=t=>o(e).additional_info=t),type:"textarea"},null,8,["modelValue"])])]),i("div",ze,[i("div",ke,[De,Ge,i("div",Ne,[l(p,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).amortization,"onUpdate:modelValue":n[8]||(n[8]=t=>o(e).amortization=t),type:"number",required:""},null,8,["modelValue"])])]),i("div",Te,[Ee,Ie,i("div",Qe,[l(p,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).total_amount,"onUpdate:modelValue":n[9]||(n[9]=t=>o(e).total_amount=t),type:"number",required:""},null,8,["modelValue"])])])])]),l(U,{align:"right",class:"text-primary"},{default:d(()=>[x(l(_,{flat:"",label:"Cancel",onClick:o(e).resetForm},null,8,["onClick"]),[[L]]),l(_,{flat:"",class:"tw-bg-green-400",label:"Add Loan",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])])]),_:1},8,["modelValue"])],64))}},z=H(),je=Q(),I=C(),Be=D("govtViewLoan",{state:()=>({selected_row:null,id:null,employeeOption:null,employeeOptions:null,type:null,typeOptions:null,date_start:null,date_end:null,half_month_indicator:null,additional_info:null,amortization:null,total_amount:null,emp_id_modified_by:je.getEmployeeId,is_archive:null,is_editing:!1}),getters:{},actions:{async fetchEmployeeOptions(){try{const{data:a,error:e}=await b.from("employee").select("id, company_employee_id, first_name, middle_name, last_name");if(e)throw e;this.employeeOptions=a}catch(a){console.log(a)}},async fetchGovernmentLoanType(){try{const{data:a,error:e}=await b.from("government_loan_type").select("id, government_loan_type_name");if(e)throw e;this.typeOptions=a}catch(a){console.log(a)}},async updateLoan(){try{const{error:a}=await b.from("government_loan").update({date_start:this.date_start,date_end:this.date_end,half_month_indicator:this.half_month_indicator==="2nd Half",additional_info:this.additional_info,amortization:this.amortization,total_amount:this.total_amount,emp_id_modified_by:this.emp_id_modified_by}).eq("id",this.id);if(a)throw a;z.showSuccessNotification("Successfully updated loan"),I.fetchGovernmentLoanList(),this.is_editing=!1}catch(a){z.showErrorNotification(a.message)}},async archiveLoan(){try{const{error:a}=await b.from("government_loan").update({is_archive:!this.is_archive,emp_id_modified_by:this.emp_id_modified_by}).eq("id",this.id);if(a)throw a;z.showSuccessNotification(`Successfully ${this.is_archive?"Unarchived":"Archived"} loan`),this.is_archive=!this.is_archive,I.fetchGovernmentLoanList()}catch(a){console.log(a)}}}});const He={class:"!tw-h-min !tw-w-5/12 !tw-max-w-full tw-bg-white tw-p-6"},Pe={class:"tw-grid tw-gap-3"},Re=i("div",{id:"section-to-print"},null,-1),Me={class:"tw-text-3xl tw-font-extrabold"},We={class:"tw-text-2xl tw-flex tw-justify-between tw"},Je=i("span",{class:"tw-font-bold"},"Application No.",-1),Ke={class:"tw-my-auto"},Xe={class:"tw-w-64"},Ye={class:"tw-flex tw-justify-between"},Ze={class:"tw-w-52"},et={class:"tw-w-52"},tt={class:"tw-w-44"},ot=i("span",{class:"tw-text-gray-500"},"(Optional)",-1),lt={class:"tw-flex tw-justify-around"},at={class:"tw-flex tw-align-middle"},nt=i("div",{class:"tw-my-auto"},"Amortization:",-1),it=i("div",{class:"tw-w-2"},null,-1),st={class:"tw-w-32"},dt={class:"tw-flex tw-align-middle"},rt=i("div",{class:"tw-my-auto"},"Total Amount:",-1),ut=i("div",{class:"tw-w-2"},null,-1),mt={class:"tw-w-32"},P={__name:"ViewLoanButton",props:["rows"],setup(a){const e=Be(),u=v(!1);function m(n){e.selected_row=JSON.parse(JSON.stringify(n)),e.id=n&&n.id||null,e.application_no=n&&n.application_no||null,e.employeeOption=n&&n.employee||null,e.type=n&&n.government_loan_type||null,e.date_start=n&&n.date_start||null,e.date_end=n&&n.date_end||null,e.half_month_indicator=(n&&n.half_month_indicator==="2nd Half"?"2nd Half":"1st Half")||null,e.additional_info=n&&n.additional_info||null,e.amortization=n&&n.amortization||null,e.total_amount=n&&n.total_amount||null,e.is_archive=n&&n.is_archive||null,u.value=!0}return e.fetchEmployeeOptions(),e.fetchGovernmentLoanType(),(n,t)=>(f(),g(S,null,[l(_,{style:{"flex-wrap":"nowrap !important"},icon:"visibility",label:"VIEW",onClick:t[0]||(t[0]=r=>m(a.rows))}),l(A,{modelValue:u.value,"onUpdate:modelValue":t[12]||(t[12]=r=>u.value=r),persistent:""},{default:d(()=>[i("div",He,[l(N,{onSubmit:t[11]||(t[11]=k(r=>o(e).updateLoan(),["prevent"]))},{default:d(()=>[i("div",Pe,[Re,i("div",Me," View Loan ID: "+R(o(e).id),1),i("div",We,[i("div",null,[l(p,{rounded:"",standout:"bg-teal text-white",label:"Application No.",modelValue:o(e).application_no,"onUpdate:modelValue":t[1]||(t[1]=r=>o(e).application_no=r),disable:"","input-class":"tw-text-1xl ",autogrow:"",type:"text",required:""},{label:d(()=>[Je]),_:1},8,["modelValue"])]),i("div",Ke,[i("div",null,[l(h,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).employeeOption,"onUpdate:modelValue":t[2]||(t[2]=r=>o(e).employeeOption=r),disable:"",label:"Employee","use-input":"","hide-selected":"","fill-input":"","hide-bottom-space":"","input-debounce":"0",options:o(e).employeeOptions,"option-label":r=>"first_name"in r?r.company_employee_id+" - "+r.last_name+" "+r.first_name:"",onFilter:n.filterFn,required:"","option-value":n.id,class:"!tw-pb-0; tw-capitalize","popup-content-class":"tw-capitalize"},{"no-option":d(()=>[l(V,null,{default:d(()=>[l($,{class:"text-grey"},{default:d(()=>[y(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label","onFilter","option-value"])])])]),i("div",Xe,[l(h,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).type,"onUpdate:modelValue":t[3]||(t[3]=r=>o(e).type=r),readonly:!o(e).is_editing,label:"Loan Type","use-input":"","hide-selected":"","fill-input":"","hide-bottom-space":"","input-debounce":"0",options:o(e).typeOptions,"option-label":"government_loan_type_name",class:"!tw-pb-0; tw-capitalize;","popup-content-class":"tw-capitalize","emit-value":""},{"no-option":d(()=>[l(V,null,{default:d(()=>[l($,{class:"text-grey"},{default:d(()=>[y(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","readonly","options"])]),i("div",Ye,[i("div",null,[i("div",Ze,[l(p,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).date_start,"onUpdate:modelValue":t[4]||(t[4]=r=>o(e).date_start=r),readonly:!o(e).is_editing,required:"",label:"Date Start",type:"date","hide-bottom-space":""},null,8,["modelValue","readonly"])])]),i("div",null,[i("div",et,[l(p,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).date_end,"onUpdate:modelValue":t[5]||(t[5]=r=>o(e).date_end=r),readonly:!o(e).is_editing,required:"",label:"Date Start",type:"date","hide-bottom-space":""},null,8,["modelValue","readonly"])])]),i("div",tt,[l(h,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).half_month_indicator,"onUpdate:modelValue":t[6]||(t[6]=r=>o(e).half_month_indicator=r),readonly:!o(e).is_editing,required:"",label:"Monthly Schedule",options:["1st Half","2nd Half"],dense:n.dense,"hide-bottom-space":""},null,8,["modelValue","readonly","dense"])])]),i("div",null,[y(" Additional Information: "),ot,i("div",null,[l(p,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).additional_info,"onUpdate:modelValue":t[7]||(t[7]=r=>o(e).additional_info=r),readonly:!o(e).is_editing,type:"textarea"},null,8,["modelValue","readonly"])])]),i("div",lt,[i("div",at,[nt,it,i("div",st,[l(p,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).amortization,"onUpdate:modelValue":t[8]||(t[8]=r=>o(e).amortization=r),readonly:!o(e).is_editing,type:"number",required:""},null,8,["modelValue","readonly"])])]),i("div",dt,[rt,ut,i("div",mt,[l(p,{rounded:"",standout:"bg-teal text-white",modelValue:o(e).total_amount,"onUpdate:modelValue":t[9]||(t[9]=r=>o(e).total_amount=r),readonly:!o(e).is_editing,type:"number",required:""},null,8,["modelValue","readonly"])])])])]),l(U,{align:"right",class:"text-primary noPrint"},{default:d(()=>[x(l(_,{flat:"",class:M(o(e).is_archive?"tw-bg-green-400":"tw-bg-red-400"),icon:"mdi-archive",label:o(e).is_archive?"Unarchive":"Archive",onClick:o(e).archiveLoan},null,8,["class","label","onClick"]),[[L]]),o(e).is_editing==!1?(f(),T(_,{key:0,flat:"",class:"tw-bg-green-400",icon:o(e).is_editing?"save":"edit",label:o(e).is_editing?"Save":"Edit",onClick:t[10]||(t[10]=r=>o(e).is_editing=!0)},null,8,["icon","label"])):(f(),T(_,{key:1,flat:"",type:"submit",class:"tw-bg-green-400",icon:o(e).is_editing?"save":"edit",label:o(e).is_editing?"Save":"Edit"},null,8,["icon","label"])),x(l(_,{flat:"",label:"CLOSE"},null,512),[[L]])]),_:1})]),_:1})])]),_:1},8,["modelValue"])],64))}};const pt={class:"!tw-h-min !tw-w-9/12 !tw-max-w-full tw-bg-white tw-p-6"},_t={class:"tw-flex tw-justify-end tw-pt-6"},ct={__name:"GovernmentLoanTableArchived",setup(a){const e=v(""),u=v(!1),m=C();return(n,t)=>(f(),g(S,null,[l(_,{icon:"mdi-archive",label:"Archived Gov't Loan",onClick:t[0]||(t[0]=r=>u.value=!0),class:"tw-bg-white"}),l(A,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=r=>u.value=r),persistent:""},{default:d(()=>[i("div",pt,[l(q,{class:"my-sticky-header-table tw-mx-auto tw-mt-6 tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse",flat:"",bordered:"",title:"Archived Government Loan","title-class":["tw-text-xl","tw-font-bold"],columns:o(m).columns,rows:o(m).getArchivedLoans,"rows-per-page-options":[10,20,0],filter:e.value,"row-key":"Loan ID"},{"top-right":d(()=>[l(p,{borderless:"",dense:"",debounce:"300",modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=r=>e.value=r),placeholder:"Search"},{append:d(()=>[l(G,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":d(r=>[l(O,{key:"actions",class:"tw-w-2/12",props:r},{default:d(()=>[l(P,{rows:r.row},null,8,["rows"])]),_:2},1032,["props"])]),_:1},8,["columns","rows","filter"]),i("div",_t,[x(l(_,{flat:"",label:"CLOSE",class:"tw-bg-green-400"},null,512),[[L]])])])]),_:1},8,["modelValue"])],64))}};var wt=F(ct,[["__scopeId","data-v-19a58d82"]]);const ft={class:"tw-mt-6"},yt={class:"tw-w-11/12 tw-mx-auto tw-flex tw-justify-end tw-mb-5 tw-gap-4"},bt={__name:"GovernmentLoanTable",setup(a){const e=v(""),u=C();return u.fetchGovernmentLoanList(),(m,n)=>(f(),g("div",ft,[i("div",yt,[l(wt),l(Fe)]),i("div",null,[l(q,{class:"my-sticky-header-table tw-w-11/12 tw-mx-auto tw-mt-6 tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse",flat:"",bordered:"",title:"Government Loan","title-class":["tw-text-xl","tw-font-bold"],columns:o(u).columns,rows:o(u).getUnarchivedLoans,"rows-per-page-options":[10,20,0],filter:e.value,"row-key":"Loan ID"},{"top-right":d(()=>[l(p,{borderless:"",dense:"",debounce:"300",modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=t=>e.value=t),placeholder:"Search"},{append:d(()=>[l(G,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":d(t=>[l(O,{key:"actions",class:"tw-w-2/12",props:t},{default:d(()=>[l(P,{rows:t.row},null,8,["rows"])]),_:2},1032,["props"])]),_:1},8,["columns","rows","filter"])])]))}};var ht=F(bt,[["__scopeId","data-v-613b08fc"]]);const vt={class:"tw-w-11/12 tw-mx-auto tw-flex tw-justify-end tw-mb-5 tw-gap-4"},Tt={__name:"AdminLoanListPage",setup(a){const e=W();e.currentPage="Loan List";const u=j();u.getLoanList();function m(s){return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}const n=v("");function t(s){return m(s[0].balance+"/"+s[0].amount)}const r=[{name:"Loan ID",required:!0,label:"Loan ID",align:"left",field:s=>s.id,format:s=>`${s}`,sortable:!0},{name:"Loan Type",align:"center",label:"Loan Type",field:s=>{var c;return(c=s.request_type_id.request_type_name)==null?void 0:c.toUpperCase()},sortable:!0},{name:"request_subject",align:"center",label:"Subject",field:s=>s.request_subject,format:s=>`${s}`,sortable:!0},{name:"Recipient",align:"center",label:"Recipient",field:s=>s.request_employee_id.company_employee_id+" - "+s.request_employee_id.first_name+" "+s.request_employee_id.last_name,sortable:!0},{name:"Issuer",align:"center",label:"Issuer",field:s=>s.admin_employee_id.company_employee_id+" - "+s.admin_employee_id.first_name+" "+s.admin_employee_id.last_name,sortable:!0},{name:"Amount",align:"center",label:"Balance / Total Amount",field:s=>s.vale[0]?t(s.vale):t(s.partial_to_ar),sortable:!0},{name:"actions",align:"center",label:"",field:""}];return(s,c)=>(f(),g(S,null,[i("div",vt,[l(ee),l(we)]),l(q,{class:"my-sticky-header-table tw-w-11/12 tw-mx-auto tw-mt-6 tw-bg-white tw-shadow-lg tw-border tw-rounded-3xl tw-border-collapse",flat:"",bordered:"",title:"Company Loan","title-class":["tw-text-xl","tw-font-bold"],filter:n.value,columns:r,rows:o(u).getUnarchivedLoanList,"rows-per-page-options":[10,20,0],"row-key":"Loan ID"},{"top-right":d(()=>[l(p,{borderless:"",dense:"",debounce:"300",modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=w=>n.value=w),placeholder:"Search"},{append:d(()=>[l(G,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":d(w=>[l(O,{key:"actions",class:"tw-w-2/12",props:w},{default:d(()=>[l(B,{rows:w.row},null,8,["rows"])]),_:2},1032,["props"])]),default:d(()=>[y(" > ")]),_:1},8,["filter","rows"]),l(ht)],64))}};export{Tt as default};
